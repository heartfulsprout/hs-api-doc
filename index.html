
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the Kittn API"
        >
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-9c19b03a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-966d6edc.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-024da600.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;graphql&quot;,&quot;javascript&quot;,&quot;jsx&quot;,&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-80c9348d.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="graphql">graphql</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="jsx">jsx</a>
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication-in-rest-api" class="toc-h1 toc-link" data-title="Authentication in REST API">Authentication in REST API</a>
          </li>
          <li>
            <a href="#apollo-provider-react-native" class="toc-h1 toc-link" data-title="Apollo Provider (React Native)">Apollo Provider (React Native)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-an-apollo-client" class="toc-h2 toc-link" data-title="Create an Apollo Client">Create an Apollo Client</a>
                  </li>
                  <li>
                    <a href="#use-apollo-provider" class="toc-h2 toc-link" data-title="Use Apollo Provider">Use Apollo Provider</a>
                  </li>
                  <li>
                    <a href="#usequery" class="toc-h2 toc-link" data-title="useQuery">useQuery</a>
                  </li>
                  <li>
                    <a href="#usemutation" class="toc-h2 toc-link" data-title="useMutation">useMutation</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#b2c" class="toc-h1 toc-link" data-title="----- B2C">----- B2C</a>
          </li>
          <li>
            <a href="#app-loading" class="toc-h1 toc-link" data-title="App Loading">App Loading</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#b2c-full-data-fetch-mobile-app" class="toc-h2 toc-link" data-title="B2C full data fetch (mobile app)">B2C full data fetch (mobile app)</a>
                  </li>
                  <li>
                    <a href="#b2c-mvp-data-fetch-web" class="toc-h2 toc-link" data-title="B2C mvp data fetch (web)">B2C mvp data fetch (web)</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#account" class="toc-h1 toc-link" data-title="Account">Account</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#insert-account" class="toc-h2 toc-link" data-title="Insert Account">Insert Account</a>
                  </li>
                  <li>
                    <a href="#reactivate-account" class="toc-h2 toc-link" data-title="Reactivate Account">Reactivate Account</a>
                  </li>
                  <li>
                    <a href="#deactivate-account" class="toc-h2 toc-link" data-title="Deactivate Account">Deactivate Account</a>
                  </li>
                  <li>
                    <a href="#permanently-delete" class="toc-h2 toc-link" data-title="Permanently Delete">Permanently Delete</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#user-profile" class="toc-h1 toc-link" data-title="User Profile">User Profile</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-user-profile" class="toc-h2 toc-link" data-title="Create User Profile">Create User Profile</a>
                  </li>
                  <li>
                    <a href="#update-account-profile" class="toc-h2 toc-link" data-title="Update Account Profile">Update Account Profile</a>
                  </li>
                  <li>
                    <a href="#update-baby-profile" class="toc-h2 toc-link" data-title="Update Baby Profile">Update Baby Profile</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#recipes" class="toc-h1 toc-link" data-title="Recipes">Recipes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-recipes" class="toc-h2 toc-link" data-title="Get all recipes">Get all recipes</a>
                  </li>
                  <li>
                    <a href="#search-recipes-by-search-term" class="toc-h2 toc-link" data-title="Search recipes by search term">Search recipes by search term</a>
                  </li>
                  <li>
                    <a href="#fetch-recipes-for-a-specific-ingredient" class="toc-h2 toc-link" data-title="Fetch recipes for a specific ingredient">Fetch recipes for a specific ingredient</a>
                  </li>
                  <li>
                    <a href="#fetch-recipes-by-one-tag" class="toc-h2 toc-link" data-title="Fetch recipes by one tag">Fetch recipes by one tag</a>
                  </li>
                  <li>
                    <a href="#fetch-recipes-by-more-than-one-tags" class="toc-h2 toc-link" data-title="Fetch recipes by more than one tags">Fetch recipes by more than one tags</a>
                  </li>
                  <li>
                    <a href="#fetch-recipe-detail-by-slug" class="toc-h2 toc-link" data-title="Fetch recipe detail by slug">Fetch recipe detail by slug</a>
                  </li>
                  <li>
                    <a href="#fetch-recipe-detail-by-recipe-id" class="toc-h2 toc-link" data-title="Fetch recipe detail by recipe ID">Fetch recipe detail by recipe ID</a>
                  </li>
                  <li>
                    <a href="#save-favorite-recipe" class="toc-h2 toc-link" data-title="Save favorite recipe">Save favorite recipe</a>
                  </li>
                  <li>
                    <a href="#create-a-new-recipe" class="toc-h2 toc-link" data-title="Create a new recipe">Create a new recipe</a>
                  </li>
                  <li>
                    <a href="#edit-a-recipe" class="toc-h2 toc-link" data-title="Edit a recipe">Edit a recipe</a>
                  </li>
                  <li>
                    <a href="#delete-a-recipe" class="toc-h2 toc-link" data-title="Delete a recipe">Delete a recipe</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#meal-plans" class="toc-h1 toc-link" data-title="Meal Plans">Meal Plans</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#save-a-recipe-to-meal-plan" class="toc-h2 toc-link" data-title="Save a recipe to meal plan">Save a recipe to meal plan</a>
                  </li>
                  <li>
                    <a href="#save-a-batch-of-meal-plan" class="toc-h2 toc-link" data-title="Save a batch of meal plan">Save a batch of meal plan</a>
                  </li>
                  <li>
                    <a href="#remove-from-meal-plan" class="toc-h2 toc-link" data-title="Remove from meal plan">Remove from meal plan</a>
                  </li>
                  <li>
                    <a href="#update-one-meal-plan-menu" class="toc-h2 toc-link" data-title="Update one meal plan menu">Update one meal plan menu</a>
                  </li>
                  <li>
                    <a href="#read-meal-plan" class="toc-h2 toc-link" data-title="Read meal plan">Read meal plan</a>
                  </li>
                  <li>
                    <a href="#save-tracking-for-meal-plan" class="toc-h2 toc-link" data-title="Save tracking for meal plan">Save tracking for meal plan</a>
                  </li>
                  <li>
                    <a href="#save-milestones" class="toc-h2 toc-link" data-title="Save milestones">Save milestones</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#wip-below" class="toc-h1 toc-link" data-title="----------- WIP below">----------- WIP below</a>
          </li>
          <li>
            <a href="#social" class="toc-h1 toc-link" data-title="Social">Social</a>
          </li>
          <li>
            <a href="#health-records" class="toc-h1 toc-link" data-title="Health Records">Health Records</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#growth-records" class="toc-h2 toc-link" data-title="Growth Records">Growth Records</a>
                  </li>
                  <li>
                    <a href="#food-reactions" class="toc-h2 toc-link" data-title="Food Reactions">Food Reactions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#food-tracking" class="toc-h1 toc-link" data-title="Food Tracking">Food Tracking</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#update-food-intro-status" class="toc-h2 toc-link" data-title="Update food intro status">Update food intro status</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#codes" class="toc-h1 toc-link" data-title="Codes">Codes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#recipe-tag" class="toc-h2 toc-link" data-title="Recipe Tag">Recipe Tag</a>
                  </li>
                  <li>
                    <a href="#diet-restriction" class="toc-h2 toc-link" data-title="Diet Restriction">Diet Restriction</a>
                  </li>
                  <li>
                    <a href="#food-allerty" class="toc-h2 toc-link" data-title="Food Allerty">Food Allerty</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#b2b" class="toc-h1 toc-link" data-title="----- B2B">----- B2B</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#query-parameters" class="toc-h2 toc-link" data-title="Query Parameters">Query Parameters</a>
                  </li>
                  <li>
                    <a href="#get-a-specific-kitten" class="toc-h2 toc-link" data-title="Get a Specific Kitten">Get a Specific Kitten</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='mailto:kay@heartfulsprout.com'>Contact Kay for any questions!</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Heartful Sprout API! You can use our API to access our API endpoints.</p>

<p>This documentation is primarily built for graphQL APIs served through Hasura. You can view the example queries in the dark area to the right.</p>

<p>If there are other languages in the workflow, you can switch the programming language of the examples with the tabs in the top right.</p>
<h1 id='authentication-in-rest-api'>Authentication in REST API</h1>
<blockquote>
<p>To authorize as admin, use this code (javascript):</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">callHasuraQuery</span><span class="p">(</span>
   <span class="nx">gql</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
   <span class="nx">operationName</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
   <span class="nx">variables</span><span class="p">:</span> <span class="nx">any</span>
<span class="p">)</span> <span class="p">{</span>
   <span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
       <span class="dl">"</span><span class="s2">next</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">revalidate</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3600</span> <span class="p">},</span>
       <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
           <span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
           <span class="dl">"</span><span class="s2">X-hasura-admin-secret</span><span class="dl">"</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_HASURA_ADMIN_SECRET</span><span class="o">!</span>
       <span class="p">},</span>
       <span class="dl">"</span><span class="s2">body</span><span class="dl">"</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
           <span class="dl">"</span><span class="s2">operationName</span><span class="dl">"</span><span class="p">:</span> <span class="nx">operationName</span><span class="p">,</span>
           <span class="dl">"</span><span class="s2">query</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gql</span><span class="p">,</span>
           <span class="dl">"</span><span class="s2">variables</span><span class="dl">"</span><span class="p">:</span> <span class="nx">variables</span>
       <span class="p">})</span>
   <span class="p">}</span>
   <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_HASURA_PROJECT_ENDPOINT</span><span class="o">!</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
   <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
   <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div>
<blockquote>
<p>To authorize as user, use this code (Javascript):</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">callHasuraQuery</span><span class="p">(</span>
   <span class="nx">gql</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
   <span class="nx">operationName</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
   <span class="nx">variables</span><span class="p">:</span> <span class="nx">any</span>
<span class="p">)</span> <span class="p">{</span>
   <span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
       <span class="dl">"</span><span class="s2">next</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">revalidate</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3600</span> <span class="p">},</span>
       <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
           <span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
           <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">userIdToken</span><span class="p">}</span><span class="s2">`</span>
       <span class="p">},</span>
       <span class="dl">"</span><span class="s2">body</span><span class="dl">"</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
           <span class="dl">"</span><span class="s2">operationName</span><span class="dl">"</span><span class="p">:</span> <span class="nx">operationName</span><span class="p">,</span>
           <span class="dl">"</span><span class="s2">query</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gql</span><span class="p">,</span>
           <span class="dl">"</span><span class="s2">variables</span><span class="dl">"</span><span class="p">:</span> <span class="nx">variables</span>
       <span class="p">})</span>
   <span class="p">}</span>
   <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_HASURA_PROJECT_ENDPOINT</span><span class="o">!</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
   <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
   <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div>
<p>Hasura is used for a simple data fetch and data update. It has only one endpoint with different graphQL commands. How to call the endpoint is written on the right, and graphQL commands can be found in this document.</p>

<p>Note that environment variables are not explicitly written in this documentation. </p>

<aside class="notice">
API calls require either admin secret or user token uses API keys to allow access to the API. Please let Kay know if you need admin secret.
</aside>

<p>The userIDToken is automatically generated in jwt format when authenticated through AWS Cognito. The AWS Cognito returns accessToken and idToken, and the idToken is the token to be used for Hasura. It should contain:</p>

<ul>
<li>role: user</li>
<li>X-Hasura-User-ID: <code>user ID from Cognito</code></li>
</ul>
<h1 id='apollo-provider-react-native'>Apollo Provider (React Native)</h1><h2 id='create-an-apollo-client'>Create an Apollo Client</h2>
<p>The example code here is in jsx format. Please click jsx tab on the top right tab menu.</p>

<blockquote>
<p>Create apollo.js file:</p>
</blockquote>
<div class="highlight"><pre class="highlight jsx tab-jsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ApolloClient</span><span class="p">,</span> <span class="nx">InMemoryCache</span><span class="p">,</span> <span class="nx">HttpLink</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@apollo/client</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">HASURA_ENDPOINT</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@env</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">createApolloClient</span> <span class="o">=</span> <span class="p">(</span><span class="nx">authToken</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
 <span class="k">return</span> <span class="k">new</span> <span class="nx">ApolloClient</span><span class="p">({</span>
   <span class="na">link</span><span class="p">:</span> <span class="k">new</span> <span class="nx">HttpLink</span><span class="p">({</span>
     <span class="na">uri</span><span class="p">:</span> <span class="nx">HASURA_ENDPOINT</span><span class="p">,</span>
     <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
       <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">authToken</span><span class="p">}</span><span class="s2">`</span>
     <span class="p">},</span>
   <span class="p">}),</span>
   <span class="na">cache</span><span class="p">:</span> <span class="k">new</span> <span class="nx">InMemoryCache</span><span class="p">(),</span>
 <span class="p">});</span>
<span class="p">};</span>

</code></pre></div><h2 id='use-apollo-provider'>Use Apollo Provider</h2>
<blockquote>
<p>Wrap around the MAin Navigator with the ApolloProvider</p>
</blockquote>
<div class="highlight"><pre class="highlight jsx tab-jsx"><code>  <span class="p">&lt;</span><span class="nc">NavigationContainer</span> <span class="na">linking</span><span class="p">=</span><span class="si">{</span><span class="nx">linkingConfig</span><span class="si">}</span><span class="p">&gt;</span>
     <span class="si">{</span><span class="nx">token</span> <span class="o">===</span> <span class="kc">null</span> <span class="p">?</span> <span class="p">&lt;</span><span class="nc">AuthNavigator</span> <span class="p">/&gt;</span> <span class="p">:</span> <span class="p">(</span>
       <span class="p">&lt;</span><span class="nc">ApolloProvider</span> <span class="na">client</span><span class="p">=</span><span class="si">{</span><span class="nx">createApolloClient</span><span class="p">(</span><span class="nx">token</span><span class="p">?.</span><span class="nx">getJwtToken</span><span class="p">())</span><span class="si">}</span><span class="p">&gt;</span>
         <span class="p">&lt;</span><span class="nc">MainNavigator</span> <span class="na">token</span><span class="p">=</span><span class="si">{</span><span class="nx">token</span><span class="si">}</span> <span class="p">/&gt;</span>
       <span class="p">&lt;/</span><span class="nc">ApolloProvider</span><span class="p">&gt;</span>
     <span class="p">)</span><span class="si">}</span>
   <span class="p">&lt;/</span><span class="nc">NavigationContainer</span><span class="p">&gt;</span>
</code></pre></div><h2 id='usequery'>useQuery</h2>
<p>useQuery is a hook. Please select jsx to see the example codes on the right.</p>
<div class="highlight"><pre class="highlight jsx tab-jsx"><code><span class="k">import</span> <span class="p">{</span><span class="nx">GQL_COMMENT</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@env</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="p">{</span><span class="nx">data</span><span class="p">,</span> <span class="nx">error</span><span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">(</span><span class="nx">GQL_COMMAND</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">){</span>
  <span class="nx">processDataHere</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div><h2 id='usemutation'>useMutation</h2>
<p>useMutation is a hook. Please select jsx to see the example codes on the right.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">import</span> <span class="p">{</span><span class="nx">GQL_COMMENT</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@env</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="p">[</span><span class="nx">gqlFunction</span><span class="p">,</span> <span class="p">{</span><span class="nx">data</span><span class="p">,</span> <span class="nx">error</span><span class="p">}]</span> <span class="o">=</span> <span class="nx">useMutation</span><span class="p">(</span><span class="nx">GQL_COMMAND</span><span class="p">);</span>

<span class="nx">gqlFunction</span><span class="p">({</span>
  <span class="na">variables</span><span class="p">:</span> <span class="nx">inputParams</span>
<span class="p">})</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">){</span>
  <span class="nx">processDataHereIfNeeded</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div><h1 id='b2c'>----- B2C</h1><h1 id='app-loading'>App Loading</h1>
<p>We load as much as user-specific information up-front when app is being loaded once authenticated. The data fetch is completely based on the user email address that passed the authentication.</p>
<h2 id='b2c-full-data-fetch-mobile-app'>B2C full data fetch (mobile app)</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="n">fetchSetupData</span><span class="p">(</span><span class="nv">$email</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!,</span><span class="w"> </span><span class="nv">$start_at</span><span class="p">:</span><span class="w"> </span><span class="n">timestamp</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">user_account</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">uid</span><span class="w">
    </span><span class="n">email</span><span class="w">
    </span><span class="n">has_profile</span><span class="w">
    </span><span class="n">nickname</span><span class="w">
    </span><span class="n">goal</span><span class="w">
    </span><span class="n">bio</span><span class="w">
    </span><span class="n">link</span><span class="w">
    </span><span class="n">user_type</span><span class="w">
    </span><span class="n">thumbnail_link</span><span class="w">
    </span><span class="n">reminder_freq_id</span><span class="w">
    </span><span class="n">cooking_freq_id</span><span class="w">
    </span><span class="n">for_who</span><span class="w">
    </span><span class="n">adventure</span><span class="w">
    </span><span class="n">repeatMenu</span><span class="w">
    </span><span class="n">baby_profiles</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
      </span><span class="n">name</span><span class="w">
      </span><span class="n">birthday</span><span class="w">
      </span><span class="n">baby_growth_hists</span><span class="p">(</span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">order_by</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">days</span><span class="p">:</span><span class="w"> </span><span class="n">desc</span><span class="p">})</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">growth_type_id</span><span class="w">
        </span><span class="n">percentile</span><span class="w">
        </span><span class="n">value</span><span class="w">
        </span><span class="n">days</span><span class="w">
      </span><span class="p">}</span><span class="w">
      </span><span class="n">sex_type_id</span><span class="w">
      </span><span class="n">baby_ing_intros</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">ing_intro</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">name</span><span class="w">
          </span><span class="n">ingredients</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">food_group_id</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="n">attempted_at</span><span class="w">
        </span><span class="n">mastered_at</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">user_tags</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">tag_id</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">user_diet_restrictions</span><span class="p">{</span><span class="w">
      </span><span class="n">diet_type</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">user_food_allergies</span><span class="p">{</span><span class="w">
      </span><span class="n">food_allergy_type</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">user_follows</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w"> </span><span class="n">distinct_on</span><span class="p">:</span><span class="w"> </span><span class="n">follower_id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">follower_id</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">userFollowsByFollowerId</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w"> </span><span class="n">distinct_on</span><span class="p">:</span><span class="w"> </span><span class="n">followee_id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">followee_id</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">recipe_hists</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span><span class="w"> </span><span class="n">planned_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_gte</span><span class="p">:</span><span class="w"> </span><span class="nv">$start_at</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
      </span><span class="n">planned_at</span><span class="w">
      </span><span class="n">served_at</span><span class="w">
      </span><span class="n">served_amount</span><span class="w">
      </span><span class="n">reaction_id</span><span class="w">
      </span><span class="n">leftover</span><span class="w">
      </span><span class="n">note</span><span class="w">
      </span><span class="n">recipe</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
        </span><span class="n">title</span><span class="w">
        </span><span class="n">link_pic</span><span class="w">
        </span><span class="n">base_serving_num</span><span class="w">
        </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">nickname</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="n">recipe_ings</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">ingredient</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">food_group_id</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="n">recipe_nutritions</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">added_sugar_G</span><span class="w">
          </span><span class="n">calcium_MG</span><span class="w">
          </span><span class="n">calories_KCAL</span><span class="w">
          </span><span class="n">carbohydrate_G</span><span class="w">
          </span><span class="n">cholesterol_MG</span><span class="w">
          </span><span class="n">choline_MG</span><span class="w">
          </span><span class="n">folatedfe_UG</span><span class="w">
          </span><span class="n">iron_MG</span><span class="w">
          </span><span class="n">magnesium_MG</span><span class="w">
          </span><span class="n">niacin_MG</span><span class="w">
          </span><span class="n">omega3_G</span><span class="w">
          </span><span class="n">omega6_G</span><span class="w">
          </span><span class="n">phosphorus_MG</span><span class="w">
          </span><span class="n">potassium_MG</span><span class="w">
          </span><span class="n">protein_G</span><span class="w">
          </span><span class="n">riboflavin_MG</span><span class="w">
          </span><span class="n">saturated_fatty_acids_G</span><span class="w">
          </span><span class="n">sodium_MG</span><span class="w">
          </span><span class="n">thiamin_MG</span><span class="w">
          </span><span class="n">total_dietary_fiber_G</span><span class="w">
          </span><span class="n">total_fatty_acids_G</span><span class="w">
          </span><span class="n">total_lipid_G</span><span class="w">
          </span><span class="n">total_sugar_G</span><span class="w">
          </span><span class="n">trans_fatty_acids_G</span><span class="w">
          </span><span class="n">vitamina_UG</span><span class="w">
          </span><span class="n">vitaminb12_UG</span><span class="w">
          </span><span class="n">vitaminb6_MG</span><span class="w">
          </span><span class="n">vitaminc_MG</span><span class="w">
          </span><span class="n">vitamine_MG</span><span class="w">
          </span><span class="n">vitamind_UG</span><span class="w">
          </span><span class="n">vitamink_UG</span><span class="w">
          </span><span class="n">zinc_MG</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">recipes_aggregate</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe_status_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="n">COMPLETE</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">aggregate</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">count</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">user_milestones</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">milestone_id</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">baby_reaction_hists</span><span class="p">(</span><span class="w">
      </span><span class="n">order_by</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">updated_at</span><span class="p">:</span><span class="w"> </span><span class="n">asc</span><span class="p">},</span><span class="w"> 
      </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}}</span><span class="w">
    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
      </span><span class="n">entered_at</span><span class="w">
      </span><span class="n">reaction</span><span class="w">
      </span><span class="n">note</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">recipe</span><span class="p">(</span><span class="n">order_by</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">updated_at</span><span class="p">:</span><span class="w"> </span><span class="n">desc</span><span class="p">},</span><span class="w"> </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_and</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w"> 
    </span><span class="p">{</span><span class="n">recipe_status_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="n">COMPLETE</span><span class="p">,</span><span class="w"> </span><span class="n">_neq</span><span class="p">:</span><span class="w"> </span><span class="n">ARCHIVE</span><span class="p">}},</span><span class="w">
    </span><span class="p">{</span><span class="n">_or</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="n">user_saved_recipes</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">}}}},</span><span class="w"> </span><span class="p">{</span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">}}}]}]})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">uid</span><span class="w">
      </span><span class="n">nickname</span><span class="w">
      </span><span class="n">thumbnail_link</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">link_pic</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
    </span><span class="n">base_serving_num</span><span class="w">
    </span><span class="n">recipe_tags</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">tag_id</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">created_at</span><span class="w">
    </span><span class="n">updated_at</span><span class="w">
    </span><span class="n">comments</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w"> </span><span class="n">distinct_on</span><span class="p">:</span><span class="w"> </span><span class="n">commenter_id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">uid</span><span class="w">
        </span><span class="n">nickname</span><span class="w">
      </span><span class="p">}</span><span class="w">
      </span><span class="n">comment</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">likes_aggregate</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">aggregate</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">count</span><span class="p">(</span><span class="n">distinct</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="p">:</span><span class="w"> </span><span class="n">liker_id</span><span class="p">)</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">likes</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span><span class="w"> </span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">}}})</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">uid</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">ing_intro</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">ingredients</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe_ings</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe_hists</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">}}}}}}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
    </span><span class="n">allergen_type</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<blockquote>
<p>Example input parameter:</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">email</span><span class="k">@email</span><span class="err">.</span><span class="n">com</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">start_at</span><span class="p">:</span><span class="w"> </span><span class="err">"2024-11-01"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Mobile app is fetching all the info that is relevant. See web version below for web MVP.</p>

<p>This query is limited to the specific user by automatically matching <code>user_account.uid</code> to idToken in authenticated jwt token.</p>
<h3 id='parameters'>Parameters:</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>text</td>
<td>ID from baby_profile table</td>
</tr>
<tr>
<td>start_at</td>
<td>timestamp</td>
<td>data load look back date. E.g. if entered &#39;2024-11-01&#39;, it fetches meal plan from &#39;2024-11-01&#39;.</td>
</tr>
</tbody></table>
<h3 id='example-input-parameters'>Example input parameters:</h3>
<p><code>
{
  email: &quot;email@email.com&quot;,
  start_at: &quot;2024-11-01&quot;
}
</code></p>
<h2 id='b2c-mvp-data-fetch-web'>B2C mvp data fetch (web)</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="n">fetchSetupData</span><span class="p">(</span><span class="nv">$email</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!,</span><span class="w"> </span><span class="nv">$start_at</span><span class="p">:</span><span class="w"> </span><span class="n">timestamp</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">user_account</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">uid</span><span class="w">
    </span><span class="n">email</span><span class="w">
    </span><span class="n">has_profile</span><span class="w">
    </span><span class="n">nickname</span><span class="w">
    </span><span class="n">goal</span><span class="w">
    </span><span class="n">bio</span><span class="w">
    </span><span class="n">link</span><span class="w">
    </span><span class="n">user_type</span><span class="w">
    </span><span class="n">thumbnail_link</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">user_tags</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">tag_id</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">user_diet_restrictions</span><span class="p">{</span><span class="w">
    </span><span class="n">diet_type</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">user_food_allergies</span><span class="p">{</span><span class="w">
    </span><span class="n">food_allergy_type</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">user_follows</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w"> </span><span class="n">distinct_on</span><span class="p">:</span><span class="w"> </span><span class="n">follower_id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">follower_id</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">userFollowsByFollowerId</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w"> </span><span class="n">distinct_on</span><span class="p">:</span><span class="w"> </span><span class="n">followee_id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">followee_id</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">recipe_hists</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span><span class="w"> </span><span class="n">planned_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_gte</span><span class="p">:</span><span class="w"> </span><span class="nv">$start_at</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">planned_at</span><span class="w">
    </span><span class="n">served_at</span><span class="w">
    </span><span class="n">recipe</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
      </span><span class="n">title</span><span class="w">
      </span><span class="n">link_pic</span><span class="w">
      </span><span class="n">base_serving_num</span><span class="w">
      </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">nickname</span><span class="w">
      </span><span class="p">}</span><span class="w">
      </span><span class="n">recipe_ings</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">ingredient</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">food_group_id</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">recipe</span><span class="p">(</span><span class="n">order_by</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">updated_at</span><span class="p">:</span><span class="w"> </span><span class="n">desc</span><span class="p">},</span><span class="w"> </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_and</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w"> 
    </span><span class="p">{</span><span class="n">recipe_status_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="n">COMPLETE</span><span class="p">,</span><span class="w"> </span><span class="n">_neq</span><span class="p">:</span><span class="w"> </span><span class="n">ARCHIVE</span><span class="p">}},</span><span class="w">
    </span><span class="p">{</span><span class="n">_or</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="n">user_saved_recipes</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">}}}},</span><span class="w"> </span><span class="p">{</span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">}}}]}]})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">uid</span><span class="w">
      </span><span class="n">nickname</span><span class="w">
      </span><span class="n">thumbnail_link</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">link_pic</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
    </span><span class="n">base_serving_num</span><span class="w">
    </span><span class="n">recipe_tags</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">tag_id</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">created_at</span><span class="w">
    </span><span class="n">updated_at</span><span class="w">
    </span><span class="n">comments</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w"> </span><span class="n">distinct_on</span><span class="p">:</span><span class="w"> </span><span class="n">commenter_id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">uid</span><span class="w">
        </span><span class="n">nickname</span><span class="w">
      </span><span class="p">}</span><span class="w">
      </span><span class="n">comment</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">likes_aggregate</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">aggregate</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">count</span><span class="p">(</span><span class="n">distinct</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="p">:</span><span class="w"> </span><span class="n">liker_id</span><span class="p">)</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">likes</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span><span class="w"> </span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">}}})</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">uid</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">ing_intro</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">ingredients</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe_ings</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe_hists</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">}}}}}}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
    </span><span class="n">allergen_type</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This query is limited to the specific user by automatically matching <code>user_account.uid</code> to idToken in authenticated jwt token.</p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>text</td>
<td>user&#39;s email</td>
</tr>
<tr>
<td>start_at</td>
<td>timestamp</td>
<td>data load look back date. E.g. if entered &#39;2024-11-01&#39;, it fetches meal plan from &#39;2024-11-01&#39;.</td>
</tr>
</tbody></table>
<h3 id='example-input-parameters-2'>Example input parameters:</h3>
<p><code>
{
  email: &quot;email@email.com&quot;,
  start_at: &quot;2024-11-01&quot;
}
</code></p>

<aside class="notice">
Note that it is pulling recipes that includes this user's recipes and saved recipes. And you need to parse whether the recipe is this user's own or someone elses (e.g. saved) manually based on the author's ID.
</aside>

<blockquote>
<p>Example input parameter:</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">email</span><span class="k">@email</span><span class="err">.</span><span class="n">com</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">start_at</span><span class="p">:</span><span class="w"> </span><span class="err">"2024-11-01"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='account'>Account</h1><h2 id='insert-account'>Insert Account</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">InsertUserAccount</span><span class="p">(</span><span class="nv">$email</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!,</span><span class="w"> </span><span class="nv">$uid</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!,</span><span class="w"> </span><span class="nv">$nickname</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!,</span><span class="w"> </span><span class="nv">$thumbnailLink</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">insert_user_account_one</span><span class="p">(</span><span class="w">
    </span><span class="n">object</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">,</span><span class="w"> </span><span class="n">nickname</span><span class="p">:</span><span class="w"> </span><span class="nv">$nickname</span><span class="p">,</span><span class="w"> </span><span class="n">uid</span><span class="p">:</span><span class="w"> </span><span class="nv">$uid</span><span class="p">,</span><span class="w"> </span><span class="n">user_status</span><span class="p">:</span><span class="w"> </span><span class="n">ACTIVE_FREE</span><span class="p">,</span><span class="w"> </span><span class="n">thumbnail_link</span><span class="p">:</span><span class="w"> </span><span class="nv">$thumbnailLink</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="n">on_conflict</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">constraint</span><span class="p">:</span><span class="w"> </span><span class="n">user_account_uid_key</span><span class="p">,</span><span class="w"> </span><span class="n">update_columns</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">thumbnail_link</span><span class="p">,</span><span class="w"> </span><span class="n">uid</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">nickname</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example input parameters:</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">email</span><span class="k">@email</span><span class="err">.</span><span class="n">com</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">uid</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">a1c5a247</span><span class="err">-</span><span class="n">b70d</span><span class="err">-4</span><span class="n">c0c</span><span class="err">-9</span><span class="n">f84</span><span class="err">-9</span><span class="n">f6bd5243391</span><span class="err">"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>AWS Cognito authenticates users, but we keep track of their data separately. Thus, when user creates an account through Cognito, we need to make sure that it gets inserted into our <code>user_account</code> data table. And because the user doesn&#39;t have a record in our database yet, we allow the row to be inserted without restriction.</p>
<h3 id='parameters-3'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>text</td>
<td>the user&#39;s email</td>
</tr>
<tr>
<td>uid</td>
<td>uuid</td>
<td>uid provided by Cognito</td>
</tr>
<tr>
<td>nickname</td>
<td>text</td>
<td>the user&#39;s nickname. It&#39;s the first part from email address by default in mobile app logic</td>
</tr>
<tr>
<td>thumbnailLink</td>
<td>text</td>
<td>S3 key pointing to this user&#39;s thumbnail.</td>
</tr>
</tbody></table>
<h3 id='example-input-parameters-3'>Example input parameters</h3>
<p><code>
{
  email: &quot;email@email.com&quot;,
  uid: &quot;a1c5a247-b70d-4c0c-9f84-9f6bd5243391&quot;
}
</code></p>

<aside class="notice">
From the front end, nickname is automatically extracted from the user's email address. And if there is a duplicate nickname, we automatically append 4-digit uuid. For example, the front end tries to save "email" as nickname from "email@email.com", and if that fails because there is a duplicate, it tries again with nickname "email-a12b".
</aside>
<h2 id='reactivate-account'>Reactivate Account</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">ReactivateAccount</span><span class="p">(</span><span class="nv">$email</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!,</span><span class="w"> </span><span class="nv">$uid</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">update_user_account</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$email</span><span class="p">}},</span><span class="w"> 
    </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_status</span><span class="p">:</span><span class="w"> </span><span class="n">ACTIVE_FREE</span><span class="p">,</span><span class="w"> </span><span class="n">uid</span><span class="p">:</span><span class="w"> </span><span class="nv">$uid</span><span class="p">}){</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
      </span><span class="n">uid</span><span class="w">
      </span><span class="n">nickname</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This is called when the uid from Cognito doesn&#39;t match with the uid from our database. This is necessary because otherwise, user token is not authorized.</p>
<h2 id='deactivate-account'>Deactivate Account</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">DeactivateAccount</span><span class="p">(</span><span class="nv">$user_account_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">update_user_account</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}},</span><span class="w"> 
    </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_status</span><span class="p">:</span><span class="w"> </span><span class="n">DEACTIVATED</span><span class="p">}){</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='permanently-delete'>Permanently Delete</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">DeleteAccount</span><span class="p">(</span><span class="nv">$user_account_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">delete_baby_growth_hist</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">baby_profile</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_baby_ing_intro</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">baby_profile</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_baby_reaction_hist</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_baby_profile</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_comments</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_or</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="n">commenter_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}},</span><span class="w">
    </span><span class="p">{</span><span class="n">recipe</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">author_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}}</span><span class="w">
  </span><span class="p">]})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_likes</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_or</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="n">liker_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}},</span><span class="w">
    </span><span class="p">{</span><span class="n">recipe</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">author_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}}</span><span class="w">
  </span><span class="p">]})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_user_follow</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_or</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="n">followee_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}},</span><span class="w"> 
    </span><span class="p">{</span><span class="n">follower_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}]})</span><span class="w"> </span><span class="p">{</span><span class="w">    
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_search_record</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_flag</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">reporter_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_user_milestone</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_user_saved_recipe</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_or</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}},</span><span class="w"> 
    </span><span class="p">{</span><span class="n">recipe</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">author_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="nv">$user_account_id</span><span class="p">}}}</span><span class="w">
  </span><span class="p">]})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_user_tag</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_user_diet_restriction</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_user_food_allergy</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_recipe_hist</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_or</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}},</span><span class="w"> </span><span class="p">{</span><span class="n">recipe</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">author_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}}]})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_recipe_ing</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">author_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_recipe_nutrition</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">author_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_recipe_step</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">author_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_recipe_tag</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">author_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_recipe</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">author_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">delete_user_account</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='user-profile'>User Profile</h1><h2 id='create-user-profile'>Create User Profile</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">CreateProfile</span><span class="p">(</span><span class="w">
  </span><span class="nv">$baby_name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w">
  </span><span class="nv">$bday</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w">
  </span><span class="nv">$sex</span><span class="p">:</span><span class="w"> </span><span class="n">sex_type_enum</span><span class="w">
  </span><span class="nv">$weight_value</span><span class="p">:</span><span class="w"> </span><span class="nb">Float</span><span class="w">
  </span><span class="nv">$weight_perc</span><span class="p">:</span><span class="w"> </span><span class="nb">Float</span><span class="w">
  </span><span class="nv">$height_value</span><span class="p">:</span><span class="w"> </span><span class="nb">Float</span><span class="w">
  </span><span class="nv">$height_perc</span><span class="p">:</span><span class="w"> </span><span class="nb">Float</span><span class="w">
  </span><span class="nv">$bmi_value</span><span class="p">:</span><span class="w"> </span><span class="nb">Float</span><span class="w">
  </span><span class="nv">$bmi_perc</span><span class="p">:</span><span class="w"> </span><span class="nb">Float</span><span class="w">
  </span><span class="nv">$days</span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="w">
  </span><span class="nv">$cooking_level</span><span class="p">:</span><span class="w"> </span><span class="n">complexity_type_enum</span><span class="w">
  </span><span class="nv">$goal</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w">
  </span><span class="nv">$for_who</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w">
  </span><span class="nv">$adventure</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w">
  </span><span class="nv">$repeatMenu</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w">
  </span><span class="nv">$source</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w">
  </span><span class="nv">$user_account_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="w">
  </span><span class="nv">$tags</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">user_tag_insert_input</span><span class="p">!]!</span><span class="w">
  </span><span class="nv">$diet</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">user_diet_restriction_insert_input</span><span class="p">!]!</span><span class="w">
  </span><span class="nv">$allergy</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">user_food_allergy_insert_input</span><span class="p">!]!</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">update_user_account</span><span class="p">(</span><span class="w">
    </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">cooking_level</span><span class="p">:</span><span class="w"> </span><span class="nv">$cooking_level</span><span class="p">,</span><span class="w"> </span><span class="n">has_profile</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
      </span><span class="n">goal</span><span class="p">:</span><span class="w"> </span><span class="nv">$goal</span><span class="p">,</span><span class="w"> </span><span class="n">for_who</span><span class="p">:</span><span class="w"> </span><span class="nv">$for_who</span><span class="p">,</span><span class="w"> </span><span class="n">adventure</span><span class="p">:</span><span class="w"> </span><span class="nv">$adventure</span><span class="p">,</span><span class="w"> 
      </span><span class="n">repeatMenu</span><span class="p">:</span><span class="w"> </span><span class="nv">$repeatMenu</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">:</span><span class="w"> </span><span class="nv">$source</span><span class="p">},</span><span class="w">
    </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">insert_baby_profile</span><span class="p">(</span><span class="w">
    </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nv">$baby_name</span><span class="w">
      </span><span class="n">sex_type_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$sex</span><span class="w">
      </span><span class="n">birthday</span><span class="p">:</span><span class="w"> </span><span class="nv">$bday</span><span class="w">
      </span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="w">
      </span><span class="n">baby_growth_hists</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="n">growth_type_id</span><span class="p">:</span><span class="w"> </span><span class="n">WEIGHT</span><span class="w">
            </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nv">$weight_value</span><span class="w">
            </span><span class="n">percentile</span><span class="p">:</span><span class="w"> </span><span class="nv">$weight_perc</span><span class="w">
            </span><span class="n">days</span><span class="p">:</span><span class="w"> </span><span class="nv">$days</span><span class="w">
          </span><span class="p">}</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="n">growth_type_id</span><span class="p">:</span><span class="w"> </span><span class="n">HEIGHT</span><span class="w">
            </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nv">$height_value</span><span class="w">
            </span><span class="n">percentile</span><span class="p">:</span><span class="w"> </span><span class="nv">$height_perc</span><span class="w">
            </span><span class="n">days</span><span class="p">:</span><span class="w"> </span><span class="nv">$days</span><span class="w">
          </span><span class="p">}</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="n">growth_type_id</span><span class="p">:</span><span class="w"> </span><span class="n">BMI</span><span class="w">
            </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nv">$bmi_value</span><span class="w">
            </span><span class="n">percentile</span><span class="p">:</span><span class="w"> </span><span class="nv">$bmi_perc</span><span class="w">
            </span><span class="n">days</span><span class="p">:</span><span class="w"> </span><span class="nv">$days</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">insert_user_tag</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="nv">$tags</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">insert_user_diet_restriction</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="nv">$diet</span><span class="p">){</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">insert_user_food_allergy</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="nv">$allergy</span><span class="p">){</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This part is usually created during onboarding process.</p>
<h3 id='parameters-4'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_account_id</td>
<td>uuid</td>
<td>the user&#39;s database-generated ID</td>
</tr>
<tr>
<td>baby_name</td>
<td>text</td>
<td>baby&#39;s name</td>
</tr>
<tr>
<td>bday</td>
<td>text</td>
<td>baby&#39;s birthday</td>
</tr>
<tr>
<td>days</td>
<td>integer</td>
<td>age in days. This is calculated from the app</td>
</tr>
<tr>
<td>sex</td>
<td>enum</td>
<td>either &#39;MALE&#39; or &#39;FEMALE&#39;</td>
</tr>
<tr>
<td>weight_value</td>
<td>float</td>
<td>weight measure in kg</td>
</tr>
<tr>
<td>weight_perc</td>
<td>integer</td>
<td>weight percentile for the baby&#39;s age. If 50%, data format is 50.</td>
</tr>
<tr>
<td>height_value</td>
<td>float</td>
<td>height measure in cm</td>
</tr>
<tr>
<td>height_perc</td>
<td>integer</td>
<td>height percentile for the baby&#39;s age. If 50%, data format is 50.</td>
</tr>
<tr>
<td>bmi_value</td>
<td>float</td>
<td>bmi measure</td>
</tr>
<tr>
<td>bmi_perc</td>
<td>integer</td>
<td>bmi percentile for the baby&#39;s age. If 50%, data format is 50.</td>
</tr>
<tr>
<td>cooking_level</td>
<td>enum</td>
<td>EASY, EASY_MEDIUM, MEDIUM, MEDIUM_COMPLEX</td>
</tr>
<tr>
<td>goal</td>
<td>text</td>
<td>goal that the user chooses</td>
</tr>
<tr>
<td>for_who</td>
<td>enum</td>
<td>CHILD or FAMILY</td>
</tr>
<tr>
<td>adventure</td>
<td>enum</td>
<td>Y, M, or N</td>
</tr>
<tr>
<td>repeatMenu</td>
<td>enum</td>
<td>Y or N</td>
</tr>
<tr>
<td>source</td>
<td>enum</td>
<td>PRACTITIONERS, FRIENDS_FAMILIES, SOCIAL_MEDIA, or OTHERS</td>
</tr>
<tr>
<td>tags</td>
<td>list</td>
<td>list of {user_account_id: user_account_id, tag: TAG_CODE}. See Tag list below.</td>
</tr>
<tr>
<td>diet</td>
<td>list</td>
<td>list of {user_account_id: user_account_id, diet_type: DIET_TYPE_CODE}. See Diet Type list below.</td>
</tr>
<tr>
<td>allergy</td>
<td>list</td>
<td>list of {user_account_id: user_account_id, food_allergy_type: ALLERGY_TYPE_CODE}. See food allergy code list below.</td>
</tr>
</tbody></table>
<h3 id='example-input-parameters-4'>Example input parameters</h3>
<p>Also available on the right panel.</p>

<p><code>
{
  user_account_id: &quot;ea39b907-6953-4354-abe4-99c441e5b1b3&quot;,
  baby_name: &quot;Noah&quot;,
  bday: &quot;2022-12-02&quot;,
  days: 250,
  sex: &quot;MALE&quot;,
  weight_value: 3.6,
  weight_perc: 70,
  height_value: 80,
  height_perc: 60,
  bmi_value: 2.5,
  bmi_perc: 70,
  cooking_level: &quot;EASY&quot;,
  goal: &quot;Get inspiration&quot;,
  for_who: &quot;FAMILY&quot;,
  adventure: &quot;Y&quot;,
  repeatMenu: &quot;Y&quot;,
  source: &quot;SOCIAL_MEDIA&quot;,
  tags: [
    {user_account_id: &quot;ea39b907-6953-4354-abe4-99c441e5b1b3&quot;, tag_id: &quot;STAGE_FAMILY&quot;},
    {user_account_id: &quot;ea39b907-6953-4354-abe4-99c441e5b1b3&quot;, tag_id: &quot;EQUIP_BLENDER&quot;},
    {user_account_id: &quot;ea39b907-6953-4354-abe4-99c441e5b1b3&quot;, tag_id: &quot;GOALS_VEGGIES&quot;}
  ],
  diet: [
    {user_account_id: &quot;ea39b907-6953-4354-abe4-99c441e5b1b3&quot;, diet_type: &quot;VEGAN&quot;}
  ],
  allergy: [
    {user_account_id: &quot;ea39b907-6953-4354-abe4-99c441e5b1b3&quot;, diet_type: &quot;DAIRY&quot;}
  ]
}
</code></p>

<blockquote>
<p>Example input parameters</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">ea39b907</span><span class="err">-6953-4354-</span><span class="n">abe4</span><span class="err">-99</span><span class="n">c441e5b1b3</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">baby_name</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">Noah</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">bday</span><span class="p">:</span><span class="w"> </span><span class="err">"2022-12-02"</span><span class="p">,</span><span class="w">
  </span><span class="n">days</span><span class="p">:</span><span class="w"> </span><span class="err">250</span><span class="p">,</span><span class="w">
  </span><span class="n">sex</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">MALE</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">weight_value</span><span class="p">:</span><span class="w"> </span><span class="err">3.6</span><span class="p">,</span><span class="w">
  </span><span class="n">weight_perc</span><span class="p">:</span><span class="w"> </span><span class="err">70</span><span class="p">,</span><span class="w">
  </span><span class="n">height_value</span><span class="p">:</span><span class="w"> </span><span class="err">80</span><span class="p">,</span><span class="w">
  </span><span class="n">height_perc</span><span class="p">:</span><span class="w"> </span><span class="err">60</span><span class="p">,</span><span class="w">
  </span><span class="n">bmi_value</span><span class="p">:</span><span class="w"> </span><span class="err">2.5</span><span class="p">,</span><span class="w">
  </span><span class="n">bmi_perc</span><span class="p">:</span><span class="w"> </span><span class="err">70</span><span class="p">,</span><span class="w">
  </span><span class="n">cooking_level</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">EASY</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">goal</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">Get</span><span class="w"> </span><span class="n">inspiration</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">for_who</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">FAMILY</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">adventure</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">Y</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">repeatMenu</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">Y</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">source</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">SOCIAL_MEDIA</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">tags</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="w">
    </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">ea39b907</span><span class="err">-6953-4354-</span><span class="n">abe4</span><span class="err">-99</span><span class="n">c441e5b1b3</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="n">tag_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">STAGE_FAMILY</span><span class="err">"</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">ea39b907</span><span class="err">-6953-4354-</span><span class="n">abe4</span><span class="err">-99</span><span class="n">c441e5b1b3</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="n">tag_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">EQUIP_BLENDER</span><span class="err">"</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">ea39b907</span><span class="err">-6953-4354-</span><span class="n">abe4</span><span class="err">-99</span><span class="n">c441e5b1b3</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="n">tag_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">GOALS_VEGGIES</span><span class="err">"</span><span class="p">}</span><span class="w">
  </span><span class="err">]</span><span class="p">,</span><span class="w">
  </span><span class="n">diet</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="w">
    </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">ea39b907</span><span class="err">-6953-4354-</span><span class="n">abe4</span><span class="err">-99</span><span class="n">c441e5b1b3</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="n">diet_type</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">VEGAN</span><span class="err">"</span><span class="p">}</span><span class="w">
  </span><span class="err">]</span><span class="p">,</span><span class="w">
  </span><span class="n">allergy</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="w">
    </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">ea39b907</span><span class="err">-6953-4354-</span><span class="n">abe4</span><span class="err">-99</span><span class="n">c441e5b1b3</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="n">diet_type</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">DAIRY</span><span class="err">"</span><span class="p">}</span><span class="w">
  </span><span class="err">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='update-account-profile'>Update Account Profile</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">UpdateAccount</span><span class="p">(</span><span class="w">
  </span><span class="nv">$user_account_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!</span><span class="w">
  </span><span class="nv">$nickname</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w">
  </span><span class="nv">$bio</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w">
  </span><span class="nv">$link</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w">
  </span><span class="nv">$thumbnailLink</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">update_user_account</span><span class="p">(</span><span class="w">
    </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}}</span><span class="w">
    </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">nickname</span><span class="p">:</span><span class="w"> </span><span class="nv">$nickname</span><span class="p">,</span><span class="w"> </span><span class="n">bio</span><span class="p">:</span><span class="w"> </span><span class="nv">$bio</span><span class="p">,</span><span class="w"> </span><span class="n">thumbnail_link</span><span class="p">:</span><span class="w"> </span><span class="nv">$thumbnailLink</span><span class="p">,</span><span class="w"> </span><span class="n">link</span><span class="p">:</span><span class="w"> </span><span class="nv">$link</span><span class="p">}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>TODO. Diet restriction and food allergy should be updated here in the same query in future, but this has not been implemented.</p>
<h3 id='parameters-5'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_account_id</td>
<td>uuid</td>
<td>the user&#39;s database-generated ID</td>
</tr>
<tr>
<td>nickname</td>
<td>text</td>
<td>new nickname</td>
</tr>
<tr>
<td>bio</td>
<td>text</td>
<td>new bio</td>
</tr>
<tr>
<td>link</td>
<td>text</td>
<td>new bio link</td>
</tr>
<tr>
<td>thumbnailLink</td>
<td>text</td>
<td>link to new thumbnail</td>
</tr>
</tbody></table>
<h2 id='update-baby-profile'>Update Baby Profile</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">UpdateBaby</span><span class="p">(</span><span class="w">
  </span><span class="nv">$baby_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!</span><span class="w">
  </span><span class="nv">$name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
  </span><span class="nv">$sex_type</span><span class="p">:</span><span class="w"> </span><span class="n">sex_type_enum</span><span class="w">
  </span><span class="nv">$birthday</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">update_baby_profile</span><span class="p">(</span><span class="w">
    </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$baby_id</span><span class="p">}}</span><span class="w">
    </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nv">$name</span><span class="p">,</span><span class="w"> </span><span class="n">sex_type_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$sex_type</span><span class="p">,</span><span class="w"> </span><span class="n">birthday</span><span class="p">:</span><span class="w"> </span><span class="nv">$birthday</span><span class="p">}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example input parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="n">baby_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">ea39b907</span><span class="err">-6953-4354-</span><span class="n">abe4</span><span class="err">-99</span><span class="n">c441e5b1b3</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">New</span><span class="w"> </span><span class="n">Name</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">sex_type</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">MALE</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">birthday</span><span class="p">:</span><span class="w"> </span><span class="err">"2024-11-03"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='parameters-6'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>baby_id</td>
<td>uuid</td>
<td>the baby&#39;s database-generated ID</td>
</tr>
<tr>
<td>name</td>
<td>text</td>
<td>baby&#39;s new name</td>
</tr>
<tr>
<td>sex_type</td>
<td>enum</td>
<td>baby&#39;s updated gender; either &#39;MALE&#39; or &#39;FEMALE&#39;</td>
</tr>
<tr>
<td>birthday</td>
<td>text</td>
<td>baby&#39;s birthday in text format</td>
</tr>
</tbody></table>
<h3 id='example-input-parameter'>Example input parameter</h3>
<p><code>
{
  baby_id: &quot;ea39b907-6953-4354-abe4-99c441e5b1b3&quot;,
  name: &quot;New Name&quot;,
  sex_type: &quot;MALE&quot;,
  birthday: &quot;2024-11-03&quot;
}
</code></p>
<h1 id='recipes'>Recipes</h1>
<p>Make sure to have these filters:</p>

<ul>
<li>removed_at is null</li>
<li>recipe_status_id == COMPLETE</li>
<li>user_account.user_status is either ACTIVE_FREE or ACTIVE_PREMIUM</li>
</ul>
<h2 id='get-all-recipes'>Get all recipes</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="n">GetAllSlugs</span><span class="p">{</span><span class="w">
  </span><span class="n">recipe</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="n">_and</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">recipe_status_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="n">COMPLETE</span><span class="p">},</span><span class="w"> 
      </span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_status</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_nin</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">DEACTIVATED</span><span class="p">,</span><span class="w"> </span><span class="n">SUSPENDED</span><span class="p">]}}},</span><span class="w"> 
      </span><span class="n">slug</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">nickname</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">slug</span><span class="w">
    </span><span class="n">updated_at</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This query is called only when web version is generating sitemal.xml.</p>
<h2 id='search-recipes-by-search-term'>Search recipes by search term</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="n">SearchRecipe</span><span class="p">(</span><span class="nv">$search_term</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">recipe</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_and</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w">
    </span><span class="p">{</span><span class="n">recipe_status_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="n">COMPLETE</span><span class="p">}},</span><span class="w"> 
    </span><span class="p">{</span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_status</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_in</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">ACTIVE_FREE</span><span class="p">,</span><span class="w"> </span><span class="n">ACTIVE_PREMIUM</span><span class="p">]}}}</span><span class="w">
    </span><span class="p">{</span><span class="n">_or</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_ilike</span><span class="p">:</span><span class="w"> </span><span class="nv">$search_term</span><span class="p">}},</span><span class="w"> 
      </span><span class="p">{</span><span class="n">description</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_ilike</span><span class="p">:</span><span class="w"> </span><span class="nv">$search_term</span><span class="p">}},</span><span class="w"> 
      </span><span class="p">{</span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">nickname</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_ilike</span><span class="p">:</span><span class="w"> </span><span class="nv">$search_term</span><span class="p">}}},</span><span class="w">
      </span><span class="p">{</span><span class="n">recipe_ings</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">display_name</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_ilike</span><span class="p">:</span><span class="w"> </span><span class="nv">$search_term</span><span class="p">}}},</span><span class="w">
      </span><span class="p">{</span><span class="n">recipe_tags</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">tag</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_ilike</span><span class="p">:</span><span class="w"> </span><span class="nv">$search_term</span><span class="p">}}}}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}]}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">link_pic</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">slug</span><span class="w">
    </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">nickname</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">base_serving_num</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Searching recipes based on title, description, recipe author&#39;s nickname, ingredients and tags.</p>

<aside class="notice">
We track what terms are being searched. Make sure to save search using the second query
</aside>
<h3 id='parameters-7'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>search_term</td>
<td>text</td>
<td>search term</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">SaveSearch</span><span class="p">(</span><span class="nv">$user_account_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> </span><span class="nv">$search_term</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">insert_search_record</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">,</span><span class="w"> </span><span class="n">search_term</span><span class="p">:</span><span class="w"> </span><span class="nv">$search_term</span><span class="p">}){</span><span class="w">
    </span><span class="n">affected_rows</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='parameters-8'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_account_id</td>
<td>uuid</td>
<td>The user&#39;s database-generated ID</td>
</tr>
<tr>
<td>search_term</td>
<td>text</td>
<td>search term</td>
</tr>
</tbody></table>
<h2 id='fetch-recipes-for-a-specific-ingredient'>Fetch recipes for a specific ingredient</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="n">GetRecipeIngIntro</span><span class="p">(</span><span class="nv">$ing_intro</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">recipe</span><span class="p">(</span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_and</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w">
    </span><span class="p">{</span><span class="n">recipe_status_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="n">COMPLETE</span><span class="p">}},</span><span class="w"> 
    </span><span class="p">{</span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_status</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_in</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">ACTIVE_FREE</span><span class="p">,</span><span class="w"> </span><span class="n">ACTIVE_PREMIUM</span><span class="p">]}}},</span><span class="w">
    </span><span class="p">{</span><span class="n">recipe_ings</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">_or</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="n">ingredient</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">ingredient_name</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_ilike</span><span class="p">:</span><span class="w"> </span><span class="nv">$ing_intro</span><span class="p">}}},</span><span class="w">
        </span><span class="p">{</span><span class="n">ingredient</span><span class="p">:{</span><span class="n">ing_intro</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_ilike</span><span class="p">:</span><span class="w"> </span><span class="nv">$ing_intro</span><span class="p">}}}}</span><span class="w">
      </span><span class="p">]}}]}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">link_pic</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">slug</span><span class="w">
    </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">nickname</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This functionality is used primarily for food tracking page. </p>
<h3 id='parameters-9'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ing_intro</td>
<td>uuid</td>
<td>Database-generated ID from ing_intro table</td>
</tr>
</tbody></table>
<h2 id='fetch-recipes-by-one-tag'>Fetch recipes by one tag</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="n">GetRecipeByTag</span><span class="p">(</span><span class="nv">$tag</span><span class="p">:</span><span class="w"> </span><span class="n">tag_enum</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">recipe</span><span class="p">(</span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_and</span><span class="p">:</span><span class="w"> 
    </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="n">recipe_tags</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">tag_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$tag</span><span class="p">}}},</span><span class="w"> 
      </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w">
      </span><span class="p">{</span><span class="n">recipe_status_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="n">COMPLETE</span><span class="p">}},</span><span class="w"> 
      </span><span class="p">{</span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_status</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_in</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">ACTIVE_FREE</span><span class="p">,</span><span class="w"> </span><span class="n">ACTIVE_PREMIUM</span><span class="p">]}}},</span><span class="w">
    </span><span class="p">]}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">uid</span><span class="w">
      </span><span class="n">nickname</span><span class="w">
      </span><span class="n">thumbnail_link</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
    </span><span class="n">link_pic</span><span class="w">
    </span><span class="n">base_serving_num</span><span class="w">
    </span><span class="n">slug</span><span class="w">
    </span><span class="n">recipe_tags</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">tag_id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This functionality can be used when there is one specific recipe tag that you want to fetch recipes for. On the main page, when a user picks one category among popular recipe categories, this is the query to use.</p>
<h2 id='fetch-recipes-by-more-than-one-tags'>Fetch recipes by more than one tags</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="n">GetRecipeByTag</span><span class="p">(</span><span class="nv">$tag</span><span class="p">:</span><span class="w"> </span><span class="n">tag_enum</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">recipe</span><span class="p">(</span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_and</span><span class="p">:</span><span class="w"> 
    </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="n">recipe_tags</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">tag_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_in</span><span class="p">:</span><span class="w"> </span><span class="nv">$tag</span><span class="p">}}},</span><span class="w"> 
      </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span><span class="w">
      </span><span class="p">{</span><span class="n">recipe_status_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="n">COMPLETE</span><span class="p">}},</span><span class="w"> 
      </span><span class="p">{</span><span class="n">user_account</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_status</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_in</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">ACTIVE_FREE</span><span class="p">,</span><span class="w"> </span><span class="n">ACTIVE_PREMIUM</span><span class="p">]}}},</span><span class="w">
    </span><span class="p">]}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">uid</span><span class="w">
      </span><span class="n">nickname</span><span class="w">
      </span><span class="n">thumbnail_link</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
    </span><span class="n">link_pic</span><span class="w">
    </span><span class="n">base_serving_num</span><span class="w">
    </span><span class="n">slug</span><span class="w">
    </span><span class="n">recipe_tags</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">tag_id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This functionality can be used when there is one or more specific recipe tags that you want to fetch. The main feed page on mobile app uses this query.</p>
<h3 id='parameters-10'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tag</td>
<td>text[]</td>
<td>List of tag IDs</td>
</tr>
</tbody></table>
<h3 id='example-input-parameter-2'>Example input parameter</h3>
<p><code>
{
  tag: [&quot;STAGE_ONE&quot;, &quot;MORE_PROTEIN&quot;]
}
</code></p>

<blockquote>
<p>Example input parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="n">tag</span><span class="p">:</span><span class="w"> </span><span class="err">["</span><span class="n">STAGE_ONE</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="n">MORE_PROTEIN</span><span class="err">"]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='fetch-recipe-detail-by-slug'>Fetch recipe detail by slug</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="n">GetRecipeDetail</span><span class="p">(</span><span class="nv">$slug</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!,</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">recipe</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">slug</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$slug</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">uid</span><span class="w">
      </span><span class="n">nickname</span><span class="w">
      </span><span class="n">thumbnail_link</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
    </span><span class="n">link_pic</span><span class="w">
    </span><span class="n">base_serving_num</span><span class="w">
    </span><span class="n">slug</span><span class="w">
    </span><span class="n">recipe_tags</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">tag_id</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">recipe_nutritions</span><span class="p">(</span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">added_sugar_G</span><span class="w">
      </span><span class="n">calcium_MG</span><span class="w">
      </span><span class="n">calories_KCAL</span><span class="w">
      </span><span class="n">carbohydrate_G</span><span class="w">
      </span><span class="n">cholesterol_MG</span><span class="w">
      </span><span class="n">choline_MG</span><span class="w">
      </span><span class="n">folatedfe_UG</span><span class="w">
      </span><span class="n">iron_MG</span><span class="w">
      </span><span class="n">magnesium_MG</span><span class="w">
      </span><span class="n">niacin_MG</span><span class="w">
      </span><span class="n">omega3_G</span><span class="w">
      </span><span class="n">omega6_G</span><span class="w">
      </span><span class="n">phosphorus_MG</span><span class="w">
      </span><span class="n">potassium_MG</span><span class="w">
      </span><span class="n">protein_G</span><span class="w">
      </span><span class="n">riboflavin_MG</span><span class="w">
      </span><span class="n">saturated_fatty_acids_G</span><span class="w">
      </span><span class="n">sodium_MG</span><span class="w">
      </span><span class="n">thiamin_MG</span><span class="w">
      </span><span class="n">total_dietary_fiber_G</span><span class="w">
      </span><span class="n">total_fatty_acids_G</span><span class="w">
      </span><span class="n">total_lipid_G</span><span class="w">
      </span><span class="n">total_sugar_G</span><span class="w">
      </span><span class="n">trans_fatty_acids_G</span><span class="w">
      </span><span class="n">vitamina_UG</span><span class="w">
      </span><span class="n">vitaminb12_UG</span><span class="w">
      </span><span class="n">vitaminb6_MG</span><span class="w">
      </span><span class="n">vitaminc_MG</span><span class="w">
      </span><span class="n">vitamind_UG</span><span class="w">
      </span><span class="n">vitamine_MG</span><span class="w">
      </span><span class="n">vitamink_UG</span><span class="w">
      </span><span class="n">zinc_MG</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">total_time_min</span><span class="w">
    </span><span class="n">prep_time_min</span><span class="w">
    </span><span class="n">cooking_time_min</span><span class="w">
    </span><span class="n">complexity_type_id</span><span class="w">
    </span><span class="n">recipe_ings</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">display_name</span><span class="w">
      </span><span class="n">display_amount</span><span class="w">
      </span><span class="n">ingredient</span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
        </span><span class="n">food_group_id</span><span class="w">
        </span><span class="n">ing_intro</span><span class="p">{</span><span class="w">
          </span><span class="n">id</span><span class="w">
          </span><span class="n">health_tag</span><span class="w">
          </span><span class="n">is_allergen</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">recipe_steps</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">step_num</span><span class="w">
      </span><span class="n">description</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">comments</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">comment</span><span class="w">
      </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
        </span><span class="n">nickname</span><span class="w">
        </span><span class="n">thumbnail_link</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">likes_aggregate</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">aggregate</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">count</span><span class="p">(</span><span class="n">distinct</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="p">:</span><span class="w"> </span><span class="n">liker_id</span><span class="p">)</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">likes</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span><span class="w"> </span><span class="n">liker_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">uid</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Every recipe has a slug. This query fetches recipe detail given the slug.</p>

<aside class="notice">
This requires the user's token because it retrieves whether this user liked / commented on this recipe.
</aside>
<h3 id='parameters-11'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>slug</td>
<td>text</td>
<td>recipe slug</td>
</tr>
<tr>
<td>user_account_id</td>
<td>uuid</td>
<td>the user&#39;s database-generated ID</td>
</tr>
</tbody></table>
<h2 id='fetch-recipe-detail-by-recipe-id'>Fetch recipe detail by recipe ID</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="n">GetRecipeDetail</span><span class="p">(</span><span class="nv">$recipe_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">recipe</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">uid</span><span class="w">
      </span><span class="n">nickname</span><span class="w">
      </span><span class="n">thumbnail_link</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
    </span><span class="n">link_pic</span><span class="w">
    </span><span class="n">base_serving_num</span><span class="w">
    </span><span class="n">slug</span><span class="w">
    </span><span class="n">recipe_tags</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">tag_id</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">recipe_nutritions</span><span class="p">(</span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">added_sugar_G</span><span class="w">
      </span><span class="n">calcium_MG</span><span class="w">
      </span><span class="n">calories_KCAL</span><span class="w">
      </span><span class="n">carbohydrate_G</span><span class="w">
      </span><span class="n">cholesterol_MG</span><span class="w">
      </span><span class="n">choline_MG</span><span class="w">
      </span><span class="n">folatedfe_UG</span><span class="w">
      </span><span class="n">iron_MG</span><span class="w">
      </span><span class="n">magnesium_MG</span><span class="w">
      </span><span class="n">niacin_MG</span><span class="w">
      </span><span class="n">omega3_G</span><span class="w">
      </span><span class="n">omega6_G</span><span class="w">
      </span><span class="n">phosphorus_MG</span><span class="w">
      </span><span class="n">potassium_MG</span><span class="w">
      </span><span class="n">protein_G</span><span class="w">
      </span><span class="n">riboflavin_MG</span><span class="w">
      </span><span class="n">saturated_fatty_acids_G</span><span class="w">
      </span><span class="n">sodium_MG</span><span class="w">
      </span><span class="n">thiamin_MG</span><span class="w">
      </span><span class="n">total_dietary_fiber_G</span><span class="w">
      </span><span class="n">total_fatty_acids_G</span><span class="w">
      </span><span class="n">total_lipid_G</span><span class="w">
      </span><span class="n">total_sugar_G</span><span class="w">
      </span><span class="n">trans_fatty_acids_G</span><span class="w">
      </span><span class="n">vitamina_UG</span><span class="w">
      </span><span class="n">vitaminb12_UG</span><span class="w">
      </span><span class="n">vitaminb6_MG</span><span class="w">
      </span><span class="n">vitaminc_MG</span><span class="w">
      </span><span class="n">vitamind_UG</span><span class="w">
      </span><span class="n">vitamine_MG</span><span class="w">
      </span><span class="n">vitamink_UG</span><span class="w">
      </span><span class="n">zinc_MG</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">total_time_min</span><span class="w">
    </span><span class="n">prep_time_min</span><span class="w">
    </span><span class="n">cooking_time_min</span><span class="w">
    </span><span class="n">complexity_type_id</span><span class="w">
    </span><span class="n">recipe_ings</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
      </span><span class="n">display_name</span><span class="w">
      </span><span class="n">display_amount</span><span class="w">
      </span><span class="n">affiliate_link</span><span class="w">
      </span><span class="n">ingredient</span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
        </span><span class="n">food_group_id</span><span class="w">
        </span><span class="n">ing_intro</span><span class="p">{</span><span class="w">
          </span><span class="n">id</span><span class="w">
          </span><span class="n">health_tag</span><span class="w">
          </span><span class="n">is_allergen</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">recipe_steps</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">step_num</span><span class="w">
      </span><span class="n">description</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">comments</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">comment</span><span class="w">
      </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
        </span><span class="n">nickname</span><span class="w">
        </span><span class="n">thumbnail_link</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">likes_aggregate</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">aggregate</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">count</span><span class="p">(</span><span class="n">distinct</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="p">:</span><span class="w"> </span><span class="n">liker_id</span><span class="p">)</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">likes</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span><span class="w"> </span><span class="n">liker_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">uid</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<aside class="warning">
This query should retire. Please let Kay know when you see this being used.
</aside>
<h2 id='save-favorite-recipe'>Save favorite recipe</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">SaveFavoriteRecipe</span><span class="p">(</span><span class="nv">$user_account_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> </span><span class="nv">$recipe_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">insert_user_saved_recipe_one</span><span class="p">(</span><span class="n">object</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">,</span><span class="w"> </span><span class="n">recipe_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_id</span><span class="p">}){</span><span class="w">
    </span><span class="n">id</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='parameters-12'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_account_id</td>
<td>uuid</td>
<td>the user&#39;s database-generated ID</td>
</tr>
<tr>
<td>recipe_id</td>
<td>uuid</td>
<td>recipe ID</td>
</tr>
</tbody></table>
<h2 id='create-a-new-recipe'>Create a new recipe</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">InsertRecipe</span><span class="p">(</span><span class="w">
  </span><span class="nv">$author_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> 
  </span><span class="nv">$base_serving_num</span><span class="p">:</span><span class="w"> </span><span class="nb">Float</span><span class="p">!,</span><span class="w">
  </span><span class="nv">$complexity_type_id</span><span class="p">:</span><span class="w"> </span><span class="n">complexity_type_enum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">MEDIUM</span><span class="p">,</span><span class="w"> 
  </span><span class="nv">$title</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!,</span><span class="w">
  </span><span class="nv">$description</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nv">$link_pic</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
  </span><span class="nv">$total_time_min</span><span class="p">:</span><span class="w"> </span><span class="nb">Float</span><span class="p">!,</span><span class="w">
  </span><span class="nv">$slug</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!,</span><span class="w">
  </span><span class="nv">$recipe_ings</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">recipe_ing_insert_input</span><span class="p">!]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nv">$recipe_nutrition</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">recipe_nutrition_insert_input</span><span class="p">!]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{},</span><span class="w"> 
  </span><span class="nv">$recipe_steps</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">recipe_step_insert_input</span><span class="p">!]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{},</span><span class="w"> 
  </span><span class="nv">$recipe_tags</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">recipe_tag_insert_input</span><span class="p">!]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">insert_recipe</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">author_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$author_id</span><span class="p">,</span><span class="w"> 
    </span><span class="n">base_serving_num</span><span class="p">:</span><span class="w"> </span><span class="nv">$base_serving_num</span><span class="p">,</span><span class="w"> 
    </span><span class="n">complexity_type_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$complexity_type_id</span><span class="p">,</span><span class="w"> 
    </span><span class="n">description</span><span class="p">:</span><span class="w"> </span><span class="nv">$description</span><span class="p">,</span><span class="w"> 
    </span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="nv">$title</span><span class="p">,</span><span class="w"> 
    </span><span class="n">total_time_min</span><span class="p">:</span><span class="w"> </span><span class="nv">$total_time_min</span><span class="p">,</span><span class="w">
    </span><span class="n">link_pic</span><span class="p">:</span><span class="w"> </span><span class="nv">$link_pic</span><span class="p">,</span><span class="w"> 
    </span><span class="n">slug</span><span class="p">:</span><span class="w"> </span><span class="nv">$slug</span><span class="p">,</span><span class="w">
    </span><span class="n">recipe_status_id</span><span class="p">:</span><span class="w"> </span><span class="n">IN_REVIEW</span><span class="p">,</span><span class="w"> 
    </span><span class="n">recipe_ings</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_ings</span><span class="p">},</span><span class="w"> 
    </span><span class="n">recipe_nutritions</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_nutrition</span><span class="p">},</span><span class="w"> 
    </span><span class="n">recipe_steps</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_steps</span><span class="p">},</span><span class="w"> 
    </span><span class="n">recipe_tags</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_tags</span><span class="p">},</span><span class="w"> 
    </span><span class="p">}){</span><span class="w">
      </span><span class="n">returning</span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Currently this is allowed in the mobile app, but we should get this built out on web shortly.</p>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="err">"</span><span class="n">author_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">ea39b907</span><span class="err">-6953-4354-</span><span class="n">abe4</span><span class="err">-99</span><span class="n">c441e5b1b3</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">base_serving_num</span><span class="err">":</span><span class="w"> </span><span class="err">1.5</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">complexity_type_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">EASY</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">title</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">Title</span><span class="w"> </span><span class="n">test</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">description</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">Description</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">link_pic</span><span class="err">":</span><span class="w"> </span><span class="err">""</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">total_time_min</span><span class="err">":</span><span class="w"> </span><span class="err">15</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">recipe_ings</span><span class="err">":</span><span class="w"> </span><span class="err">[</span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">ing_id</span><span class="err">":</span><span class="w"> </span><span class="err">"28</span><span class="n">b39ab0</span><span class="err">-</span><span class="n">ca7b</span><span class="err">-4305-8</span><span class="n">c84</span><span class="err">-010737</span><span class="n">a1fce7</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">display_amount</span><span class="err">":</span><span class="w"> </span><span class="err">1</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">display_unit_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">CUP</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">std_amount</span><span class="err">":</span><span class="w"> </span><span class="err">15</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">std_unit_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">GRAM_RAW</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">display_name</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">Spinach</span><span class="err">"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">ing_id</span><span class="err">":</span><span class="w"> </span><span class="err">"1776</span><span class="n">a20d</span><span class="err">-</span><span class="n">beac</span><span class="err">-41</span><span class="n">b2</span><span class="err">-</span><span class="n">a4b4</span><span class="err">-</span><span class="n">f6353f0a775e</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">display_amount</span><span class="err">":</span><span class="w"> </span><span class="err">1</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">display_unit_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">CUP</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">std_amount</span><span class="err">":</span><span class="w"> </span><span class="err">15</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">std_unit_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">GRAM_RAW</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">display_name</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">Carrot</span><span class="p">,</span><span class="w"> </span><span class="n">cubed</span><span class="err">"</span><span class="w">
  </span><span class="p">}</span><span class="err">]</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">recipe_nutrition</span><span class="err">":</span><span class="w"> </span><span class="err">[</span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">added_sugar_G</span><span class="err">":</span><span class="w"> </span><span class="err">0</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">calcium_MG</span><span class="err">":</span><span class="w"> </span><span class="err">1</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">calories_KCAL</span><span class="err">":</span><span class="w"> </span><span class="err">2</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">carbohydrate_G</span><span class="err">":</span><span class="w"> </span><span class="err">3</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">cholesterol_MG</span><span class="err">":</span><span class="w"> </span><span class="err">4</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">choline_MG</span><span class="err">":</span><span class="w"> </span><span class="err">5</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">folatedfe_UG</span><span class="err">":</span><span class="w"> </span><span class="err">6</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">iron_MG</span><span class="err">":</span><span class="w"> </span><span class="err">7</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">magnesium_MG</span><span class="err">":</span><span class="w"> </span><span class="err">8</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">niacin_MG</span><span class="err">":</span><span class="w"> </span><span class="err">9</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">omega3_G</span><span class="err">":</span><span class="w"> </span><span class="err">10</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">omega6_G</span><span class="err">":</span><span class="w"> </span><span class="err">11</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">phosphorus_MG</span><span class="err">":</span><span class="w"> </span><span class="err">12</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">potassium_MG</span><span class="err">":</span><span class="w"> </span><span class="err">13</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">protein_G</span><span class="err">":</span><span class="w"> </span><span class="err">14</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">riboflavin_MG</span><span class="err">":</span><span class="w"> </span><span class="err">15</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">saturated_fatty_acids_G</span><span class="err">":</span><span class="w"> </span><span class="err">16</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">sodium_MG</span><span class="err">":</span><span class="w"> </span><span class="err">17</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">thiamin_MG</span><span class="err">":</span><span class="w"> </span><span class="err">18</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">total_dietary_fiber_G</span><span class="err">":</span><span class="w"> </span><span class="err">19</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">total_lipid_G</span><span class="err">":</span><span class="w"> </span><span class="err">20</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitamina_IU</span><span class="err">":</span><span class="w"> </span><span class="err">21</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitaminb12_UG</span><span class="err">":</span><span class="w"> </span><span class="err">22</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitaminb6_MG</span><span class="err">":</span><span class="w"> </span><span class="err">23</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitaminc_MG</span><span class="err">":</span><span class="w"> </span><span class="err">24</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitamind_UG</span><span class="err">":</span><span class="w"> </span><span class="err">25</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitamine_MG</span><span class="err">":</span><span class="w"> </span><span class="err">26</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitamink_UG</span><span class="err">":</span><span class="w"> </span><span class="err">27</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">zinc_MG</span><span class="err">":</span><span class="w"> </span><span class="err">28</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">total_sugar_G</span><span class="err">":</span><span class="w"> </span><span class="err">29</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">total_fatty_acids_G</span><span class="err">":</span><span class="w"> </span><span class="err">30</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">trans_fatty_acids_G</span><span class="err">":</span><span class="w"> </span><span class="err">31</span><span class="w">
  </span><span class="p">}</span><span class="err">]</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">recipe_steps</span><span class="err">":</span><span class="w"> </span><span class="err">[</span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">step_num</span><span class="err">":</span><span class="w"> </span><span class="err">1</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">description</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">description1</span><span class="err">"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">step_num</span><span class="err">":</span><span class="w"> </span><span class="err">2</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">description</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">description2</span><span class="err">"</span><span class="w">
  </span><span class="p">}</span><span class="err">]</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">recipe_tags</span><span class="err">":</span><span class="w"> </span><span class="err">[</span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">tag_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">STAGE_ONE</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">is_primary</span><span class="err">":</span><span class="w"> </span><span class="n">false</span><span class="w">
  </span><span class="p">}</span><span class="err">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='edit-a-recipe'>Edit a recipe</h2>
<p>Currently this is allowed in the mobile app, but we should have this built out on web shortly.</p>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="w">
  </span><span class="k">mutation</span><span class="w"> </span><span class="n">EditRecipe</span><span class="p">(</span><span class="w">
    </span><span class="nv">$recipe_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> 
    </span><span class="nv">$base_serving_num</span><span class="p">:</span><span class="w"> </span><span class="nb">Float</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
    </span><span class="nv">$complexity_type_id</span><span class="p">:</span><span class="w"> </span><span class="n">complexity_type_enum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">COMPLEX</span><span class="p">,</span><span class="w"> 
    </span><span class="nv">$description</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
    </span><span class="nv">$title</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
    </span><span class="nv">$slug</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nv">$total_time_min</span><span class="p">:</span><span class="w"> </span><span class="nb">Float</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w"> 
    </span><span class="nv">$recipe_nutrition</span><span class="p">:</span><span class="w"> </span><span class="n">recipe_nutrition_set_input</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nv">$recipe_tags</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">recipe_tag_insert_input</span><span class="p">!]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{},</span><span class="w"> 
    </span><span class="nv">$recipe_steps</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">recipe_step_insert_input</span><span class="p">!]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{},</span><span class="w"> 
    </span><span class="nv">$recipe_ings</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">recipe_ing_insert_input</span><span class="p">!]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span><span class="w">

    </span><span class="n">update_recipe</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_id</span><span class="p">}},</span><span class="w"> 
      </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">base_serving_num</span><span class="p">:</span><span class="w"> </span><span class="nv">$base_serving_num</span><span class="p">,</span><span class="w"> 
        </span><span class="n">complexity_type_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$complexity_type_id</span><span class="p">,</span><span class="w"> 
        </span><span class="n">description</span><span class="p">:</span><span class="w"> </span><span class="nv">$description</span><span class="p">,</span><span class="w"> 
        </span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="nv">$title</span><span class="p">,</span><span class="w"> 
        </span><span class="n">total_time_min</span><span class="p">:</span><span class="w"> </span><span class="nv">$total_time_min</span><span class="p">,</span><span class="w">
        </span><span class="n">slug</span><span class="p">:</span><span class="w"> </span><span class="nv">$slug</span><span class="w">
      </span><span class="p">})</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">update_recipe_nutrition</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_id</span><span class="p">}},</span><span class="w"> </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_nutrition</span><span class="p">){</span><span class="w">
      </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">delete_recipe_ing</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">insert_recipe_ing</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_ings</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">

    </span><span class="n">delete_recipe_step</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_id</span><span class="p">}})</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">insert_recipe_step</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_steps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">delete_recipe_tag</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">recipe_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_id</span><span class="p">}}){</span><span class="w">
      </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">insert_recipe_tag</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_tags</span><span class="p">){</span><span class="w">
      </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="err">"</span><span class="n">recipe_id</span><span class="err">":</span><span class="w"> </span><span class="err">"065</span><span class="n">d689d</span><span class="err">-2</span><span class="n">b52</span><span class="err">-4</span><span class="n">cf1</span><span class="err">-86</span><span class="n">b1</span><span class="err">-</span><span class="n">a221380e1b28</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">base_serving_num</span><span class="err">":</span><span class="w"> </span><span class="err">1.5</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">complexity_type_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">EASY</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">title</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">Title</span><span class="w"> </span><span class="n">test</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">description</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">Description</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">total_time_min</span><span class="err">":</span><span class="w"> </span><span class="err">15</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">recipe_ings</span><span class="err">":</span><span class="w"> </span><span class="err">[</span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">recipe_id</span><span class="err">":</span><span class="w"> </span><span class="err">"065</span><span class="n">d689d</span><span class="err">-2</span><span class="n">b52</span><span class="err">-4</span><span class="n">cf1</span><span class="err">-86</span><span class="n">b1</span><span class="err">-</span><span class="n">a221380e1b28</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">ingredient_id</span><span class="err">":</span><span class="w"> </span><span class="err">"4</span><span class="n">fbc6b95</span><span class="err">-2</span><span class="n">bd0</span><span class="err">-4655-9</span><span class="n">c30</span><span class="err">-112</span><span class="n">d9521980b</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">display_amount</span><span class="err">":</span><span class="w"> </span><span class="err">"1</span><span class="w"> </span><span class="n">CUP</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">std_amount</span><span class="err">":</span><span class="w"> </span><span class="err">15</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">display_name</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">Spinach</span><span class="err">"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">recipe_id</span><span class="err">":</span><span class="w"> </span><span class="err">"065</span><span class="n">d689d</span><span class="err">-2</span><span class="n">b52</span><span class="err">-4</span><span class="n">cf1</span><span class="err">-86</span><span class="n">b1</span><span class="err">-</span><span class="n">a221380e1b28</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">ingredient_id</span><span class="err">":</span><span class="w"> </span><span class="err">"4</span><span class="n">fbc6b95</span><span class="err">-2</span><span class="n">bd0</span><span class="err">-4655-9</span><span class="n">c30</span><span class="err">-112</span><span class="n">d9521980b</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">display_amount</span><span class="err">":</span><span class="w"> </span><span class="err">"1</span><span class="w"> </span><span class="n">CUP</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">std_amount</span><span class="err">":</span><span class="w"> </span><span class="err">15</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">display_name</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">Carrot</span><span class="p">,</span><span class="w"> </span><span class="n">cubed</span><span class="err">"</span><span class="w">
  </span><span class="p">}</span><span class="err">]</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">recipe_nutrition</span><span class="err">":</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">added_sugar_G</span><span class="err">":</span><span class="w"> </span><span class="err">0</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">calcium_MG</span><span class="err">":</span><span class="w"> </span><span class="err">1</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">calories_KCAL</span><span class="err">":</span><span class="w"> </span><span class="err">2</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">carbohydrate_G</span><span class="err">":</span><span class="w"> </span><span class="err">3</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">cholesterol_MG</span><span class="err">":</span><span class="w"> </span><span class="err">4</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">choline_MG</span><span class="err">":</span><span class="w"> </span><span class="err">5</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">folatedfe_UG</span><span class="err">":</span><span class="w"> </span><span class="err">6</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">iron_MG</span><span class="err">":</span><span class="w"> </span><span class="err">7</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">magnesium_MG</span><span class="err">":</span><span class="w"> </span><span class="err">8</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">niacin_MG</span><span class="err">":</span><span class="w"> </span><span class="err">9</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">omega3_G</span><span class="err">":</span><span class="w"> </span><span class="err">10</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">omega6_G</span><span class="err">":</span><span class="w"> </span><span class="err">11</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">phosphorus_MG</span><span class="err">":</span><span class="w"> </span><span class="err">12</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">potassium_MG</span><span class="err">":</span><span class="w"> </span><span class="err">13</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">protein_G</span><span class="err">":</span><span class="w"> </span><span class="err">14</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">riboflavin_MG</span><span class="err">":</span><span class="w"> </span><span class="err">15</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">saturated_fatty_acids_G</span><span class="err">":</span><span class="w"> </span><span class="err">16</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">sodium_MG</span><span class="err">":</span><span class="w"> </span><span class="err">17</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">thiamin_MG</span><span class="err">":</span><span class="w"> </span><span class="err">18</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">total_dietary_fiber_G</span><span class="err">":</span><span class="w"> </span><span class="err">19</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">total_lipid_G</span><span class="err">":</span><span class="w"> </span><span class="err">20</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitamina_UG</span><span class="err">":</span><span class="w"> </span><span class="err">21</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitaminb12_UG</span><span class="err">":</span><span class="w"> </span><span class="err">22</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitaminb6_MG</span><span class="err">":</span><span class="w"> </span><span class="err">23</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitaminc_MG</span><span class="err">":</span><span class="w"> </span><span class="err">24</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitamind_UG</span><span class="err">":</span><span class="w"> </span><span class="err">25</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitamine_MG</span><span class="err">":</span><span class="w"> </span><span class="err">26</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">vitamink_UG</span><span class="err">":</span><span class="w"> </span><span class="err">27</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">zinc_MG</span><span class="err">":</span><span class="w"> </span><span class="err">28</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">total_sugar_G</span><span class="err">":</span><span class="w"> </span><span class="err">29</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">total_fatty_acids_G</span><span class="err">":</span><span class="w"> </span><span class="err">30</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">trans_fatty_acids_G</span><span class="err">":</span><span class="w"> </span><span class="err">31</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">"</span><span class="n">recipe_steps</span><span class="err">":</span><span class="w"> </span><span class="err">[</span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">recipe_id</span><span class="err">":</span><span class="w"> </span><span class="err">"065</span><span class="n">d689d</span><span class="err">-2</span><span class="n">b52</span><span class="err">-4</span><span class="n">cf1</span><span class="err">-86</span><span class="n">b1</span><span class="err">-</span><span class="n">a221380e1b28</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">step_num</span><span class="err">":</span><span class="w"> </span><span class="err">1</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">description</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">description1</span><span class="err">"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">recipe_id</span><span class="err">":</span><span class="w"> </span><span class="err">"065</span><span class="n">d689d</span><span class="err">-2</span><span class="n">b52</span><span class="err">-4</span><span class="n">cf1</span><span class="err">-86</span><span class="n">b1</span><span class="err">-</span><span class="n">a221380e1b28</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">step_num</span><span class="err">":</span><span class="w"> </span><span class="err">2</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">description</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">description2</span><span class="err">"</span><span class="w">
  </span><span class="p">}</span><span class="err">]</span><span class="p">,</span><span class="w">
  </span><span class="err">"</span><span class="n">recipe_tags</span><span class="err">":</span><span class="w"> </span><span class="err">[</span><span class="p">{</span><span class="w">
    </span><span class="err">"</span><span class="n">recipe_id</span><span class="err">":</span><span class="w"> </span><span class="err">"065</span><span class="n">d689d</span><span class="err">-2</span><span class="n">b52</span><span class="err">-4</span><span class="n">cf1</span><span class="err">-86</span><span class="n">b1</span><span class="err">-</span><span class="n">a221380e1b28</span><span class="err">"</span><span class="p">,</span><span class="w">
    </span><span class="err">"</span><span class="n">tag_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">STAGE_ONE</span><span class="err">"</span><span class="w">
  </span><span class="p">}</span><span class="err">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='delete-a-recipe'>Delete a recipe</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">DeleteRecipe</span><span class="p">(</span><span class="nv">$recipe_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">update_recipe</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_id</span><span class="p">}},</span><span class="w"> </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="n">now</span><span class="p">,</span><span class="w"> </span><span class="n">recipe_status_id</span><span class="p">:</span><span class="w"> </span><span class="n">ARCHIVE</span><span class="p">}){</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='meal-plans'>Meal Plans</h1><h2 id='save-a-recipe-to-meal-plan'>Save a recipe to meal plan</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">AddToMealPlan</span><span class="p">(</span><span class="w">
  </span><span class="nv">$planned_at</span><span class="p">:</span><span class="w"> </span><span class="n">timestamp</span><span class="p">!,</span><span class="w"> 
  </span><span class="nv">$recipe_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> 
  </span><span class="nv">$user_account_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">insert_recipe_hist</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">,</span><span class="w"> 
    </span><span class="n">recipe_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_id</span><span class="p">,</span><span class="w"> 
    </span><span class="n">planned_at</span><span class="p">:</span><span class="w"> </span><span class="nv">$planned_at</span><span class="p">}</span><span class="w">
  </span><span class="p">){</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example input parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="err">"065</span><span class="n">d689d</span><span class="err">-2</span><span class="n">b52</span><span class="err">-4</span><span class="n">cf1</span><span class="err">-86</span><span class="n">b1</span><span class="err">-</span><span class="n">a221380e1b28</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">recipe_id</span><span class="p">:</span><span class="w"> </span><span class="err">"065</span><span class="n">d689d</span><span class="err">-2</span><span class="n">b52</span><span class="err">-4</span><span class="n">cf1</span><span class="err">-86</span><span class="n">b1</span><span class="err">-</span><span class="n">a221380e1b28</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">planned_at</span><span class="p">:</span><span class="w"> </span><span class="err">"2024-11-02"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This is used when a user manually adds a recipe to a meal plan</p>
<h3 id='parameters-13'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_account_id</td>
<td>uuid</td>
<td>the user&#39;s database-generated ID</td>
</tr>
<tr>
<td>recipe_id</td>
<td>uuid</td>
<td>recipe ID</td>
</tr>
<tr>
<td>planned_at</td>
<td>timestamp</td>
<td>the date that a recipe is added to in meal plan</td>
</tr>
</tbody></table>
<h3 id='example-input-parameters-5'>Example input parameters</h3>
<p><code>
{
  user_account_id: &quot;065d689d-2b52-4cf1-86b1-a221380e1b28&quot;,
  recipe_id: &quot;065d689d-2b52-4cf1-86b1-a221380e1b28&quot;,
  planned_at: &quot;2024-11-02&quot;
}
</code></p>
<h2 id='save-a-batch-of-meal-plan'>Save a batch of meal plan</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">AddAllFromRecEngine</span><span class="p">(</span><span class="nv">$objects</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">recipe_hist_insert_input</span><span class="p">!]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">insert_recipe_hist</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="nv">$objects</span><span class="p">){</span><span class="w">
    </span><span class="n">returning</span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
      </span><span class="n">recipe</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">recipe_nutritions</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">added_sugar_G</span><span class="w">
          </span><span class="n">calcium_MG</span><span class="w">
          </span><span class="n">calories_KCAL</span><span class="w">
          </span><span class="n">carbohydrate_G</span><span class="w">
          </span><span class="n">cholesterol_MG</span><span class="w">
          </span><span class="n">choline_MG</span><span class="w">
          </span><span class="n">folatedfe_UG</span><span class="w">
          </span><span class="n">iron_MG</span><span class="w">
          </span><span class="n">magnesium_MG</span><span class="w">
          </span><span class="n">niacin_MG</span><span class="w">
          </span><span class="n">omega3_G</span><span class="w">
          </span><span class="n">omega6_G</span><span class="w">
          </span><span class="n">phosphorus_MG</span><span class="w">
          </span><span class="n">potassium_MG</span><span class="w">
          </span><span class="n">protein_G</span><span class="w">
          </span><span class="n">riboflavin_MG</span><span class="w">
          </span><span class="n">saturated_fatty_acids_G</span><span class="w">
          </span><span class="n">sodium_MG</span><span class="w">
          </span><span class="n">thiamin_MG</span><span class="w">
          </span><span class="n">total_dietary_fiber_G</span><span class="w">
          </span><span class="n">total_fatty_acids_G</span><span class="w">
          </span><span class="n">total_lipid_G</span><span class="w">
          </span><span class="n">total_sugar_G</span><span class="w">
          </span><span class="n">trans_fatty_acids_G</span><span class="w">
          </span><span class="n">vitamina_UG</span><span class="w">
          </span><span class="n">vitaminb12_UG</span><span class="w">
          </span><span class="n">vitaminb6_MG</span><span class="w">
          </span><span class="n">vitaminc_MG</span><span class="w">
          </span><span class="n">vitamine_MG</span><span class="w">
          </span><span class="n">vitamind_UG</span><span class="w">
          </span><span class="n">vitamink_UG</span><span class="w">
          </span><span class="n">zinc_MG</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="err">"</span><span class="n">objects</span><span class="err">":</span><span class="w"> </span><span class="err">[</span><span class="w">
    </span><span class="p">{</span><span class="err">"</span><span class="n">recipe_id</span><span class="err">":</span><span class="w"> </span><span class="err">"6</span><span class="n">a990e5b</span><span class="err">-</span><span class="n">d42c</span><span class="err">-4</span><span class="n">d10</span><span class="err">-9794-</span><span class="n">fe42ca888b19</span><span class="err">"</span><span class="p">,</span><span class="w">
     </span><span class="err">"</span><span class="n">planned_at</span><span class="err">":</span><span class="w"> </span><span class="err">"1/8/2024"</span><span class="p">,</span><span class="w">
     </span><span class="err">"</span><span class="n">user_account_id</span><span class="err">":</span><span class="w"> </span><span class="err">"4782</span><span class="n">a261</span><span class="err">-7</span><span class="n">d65</span><span class="err">-4</span><span class="n">b2a</span><span class="err">-8850-</span><span class="n">a4505320d3fc</span><span class="err">"</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="err">"</span><span class="n">recipe_id</span><span class="err">":</span><span class="w"> </span><span class="err">"6</span><span class="n">a990e5b</span><span class="err">-</span><span class="n">d42c</span><span class="err">-4</span><span class="n">d10</span><span class="err">-9794-</span><span class="n">fe42ca888b19</span><span class="err">"</span><span class="p">,</span><span class="w">
     </span><span class="err">"</span><span class="n">planned_at</span><span class="err">":</span><span class="w"> </span><span class="err">"1/9/2024"</span><span class="p">,</span><span class="w">
     </span><span class="err">"</span><span class="n">user_account_id</span><span class="err">":</span><span class="w"> </span><span class="err">"4782</span><span class="n">a261</span><span class="err">-7</span><span class="n">d65</span><span class="err">-4</span><span class="n">b2a</span><span class="err">-8850-</span><span class="n">a4505320d3fc</span><span class="err">"</span><span class="p">}</span><span class="w">
  </span><span class="err">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The query above returns recipe_hist_id and recipe.recipe_nutrition.</p>
<h2 id='remove-from-meal-plan'>Remove from meal plan</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">RemoveMealPlan</span><span class="p">(</span><span class="nv">$recipe_hist_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">update_recipe_hist</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_hist_id</span><span class="p">}},</span><span class="w"> </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="n">now</span><span class="p">}){</span><span class="w">
    </span><span class="n">returning</span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<aside class="notice">
Note that it is purely going by recipe_hist_id. The user-specificity is enforced in jwt token.
</aside>
<h2 id='update-one-meal-plan-menu'>Update one meal plan menu</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">UpdateMealPlan</span><span class="p">(</span><span class="nv">$recipe_hist_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> </span><span class="nv">$planned_at</span><span class="p">:</span><span class="w"> </span><span class="n">timestamp</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">update_recipe_hist</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_hist_id</span><span class="p">}},</span><span class="w"> </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">planned_at</span><span class="p">:</span><span class="w"> </span><span class="nv">$planned_at</span><span class="p">}){</span><span class="w">
    </span><span class="n">returning</span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='parameters-14'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>recipe_hist_id</td>
<td>uuid</td>
<td>the user&#39;s meal plan data entry ID from recipe_hist table</td>
</tr>
<tr>
<td>planned_at</td>
<td>timestamp</td>
<td>the date that a recipe is added to in meal plan</td>
</tr>
</tbody></table>
<h2 id='read-meal-plan'>Read meal plan</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">query</span><span class="w"> </span><span class="n">GetMealPlan</span><span class="p">(</span><span class="w">
  </span><span class="nv">$start_at</span><span class="p">:</span><span class="w"> </span><span class="n">timestamp</span><span class="p">!,</span><span class="w"> 
  </span><span class="nv">$user_account_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">recipe_hist</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_is_null</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span><span class="w"> 
    </span><span class="n">planned_at</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_gte</span><span class="p">:</span><span class="w"> </span><span class="nv">$start_at</span><span class="p">},</span><span class="w"> 
    </span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">}</span><span class="w">
  </span><span class="p">})</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">planned_at</span><span class="w">
    </span><span class="n">served_at</span><span class="w">
    </span><span class="n">reaction_id</span><span class="w">
    </span><span class="n">served_amount</span><span class="w">
    </span><span class="n">note</span><span class="w">
    </span><span class="n">leftover</span><span class="w">
    </span><span class="n">recipe</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
      </span><span class="n">title</span><span class="w">
      </span><span class="n">link_pic</span><span class="w">
      </span><span class="n">user_account</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">nickname</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<blockquote>
<p>Example input parameter:</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">a1c5a247</span><span class="err">-</span><span class="n">b70d</span><span class="err">-4</span><span class="n">c0c</span><span class="err">-9</span><span class="n">f84</span><span class="err">-9</span><span class="n">f6bd5243391</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">start_at</span><span class="p">:</span><span class="w"> </span><span class="err">"2024-11-01"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='parameters-15'>Parameters:</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_account_id</td>
<td>uuid</td>
<td>the user&#39;s database-generated ID</td>
</tr>
<tr>
<td>start_at</td>
<td>timestamp</td>
<td>data load look back date. E.g. if entered &#39;2024-11-01&#39;, it fetches meal plan from &#39;2024-11-01&#39;.</td>
</tr>
</tbody></table>
<h2 id='save-tracking-for-meal-plan'>Save tracking for meal plan</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">SaveReaction</span><span class="p">(</span><span class="w">
    </span><span class="nv">$recipe_hist_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> 
    </span><span class="nv">$reaction_id</span><span class="p">:</span><span class="w"> </span><span class="n">reaction_type_enum</span><span class="p">!,</span><span class="w"> 
    </span><span class="nv">$served_amount</span><span class="p">:</span><span class="w"> </span><span class="nb">Float</span><span class="p">!,</span><span class="w">
    </span><span class="nv">$note</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">=</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nv">$leftover</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">=</span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">update_recipe_hist</span><span class="p">(</span><span class="w">
    </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$recipe_hist_id</span><span class="p">}},</span><span class="w"> 
    </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">reaction_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$reaction_id</span><span class="p">,</span><span class="w"> 
      </span><span class="n">served_amount</span><span class="p">:</span><span class="w"> </span><span class="nv">$served_amount</span><span class="p">,</span><span class="w">
      </span><span class="n">served_at</span><span class="p">:</span><span class="n">now</span><span class="p">,</span><span class="w">
      </span><span class="n">note</span><span class="p">:</span><span class="nv">$note</span><span class="p">,</span><span class="w">
      </span><span class="n">leftover</span><span class="p">:</span><span class="w"> </span><span class="nv">$leftover</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">served_amount</span><span class="w">
      </span><span class="n">leftover</span><span class="w">
      </span><span class="n">recipe</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">recipe_ings</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">ingredient</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">ing_intro</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="n">id</span><span class="w">
              </span><span class="n">allergen_type</span><span class="w">
              </span><span class="n">name</span><span class="w">
            </span><span class="p">}</span><span class="w">
            </span><span class="n">food_group_id</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example input parameter:</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="n">recipe_hist_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">a1c5a247</span><span class="err">-</span><span class="n">b70d</span><span class="err">-4</span><span class="n">c0c</span><span class="err">-9</span><span class="n">f84</span><span class="err">-9</span><span class="n">f6bd5243391</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">reaction_id</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">LIKE</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">served_amount</span><span class="p">:</span><span class="w"> </span><span class="err">1.5</span><span class="p">,</span><span class="w">
  </span><span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">It</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">good</span><span class="err">"</span><span class="p">,</span><span class="w">
  </span><span class="n">leftover</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="n">Didn</span><span class="err">'</span><span class="n">t</span><span class="w"> </span><span class="n">eat</span><span class="w"> </span><span class="n">broccoli</span><span class="err">"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='parameters-16'>Parameters:</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>reaction_hist_id</td>
<td>uuid</td>
<td>meal plan entry ID from recipe_hist_id</td>
</tr>
<tr>
<td>reaction_id</td>
<td>enum</td>
<td>LIKE, NEUTRAL, or DISLIKE</td>
</tr>
<tr>
<td>served_amount</td>
<td>real</td>
<td>the serving size that the kid ate</td>
</tr>
<tr>
<td>note</td>
<td>text</td>
<td>note about this intake</td>
</tr>
<tr>
<td>leftover</td>
<td>text</td>
<td>description of what was being left</td>
</tr>
</tbody></table>
<h3 id='example-input-parameter-3'>Example input parameter</h3>
<p><code>
{
  recipe_hist_id: &quot;a1c5a247-b70d-4c0c-9f84-9f6bd5243391&quot;,
  reaction_id: &quot;LIKE&quot;,
  served_amount: 1.5,
  note: &quot;It was good&quot;,
  leftover: &quot;Didn&#39;t eat broccoli&quot;
}
</code></p>
<h2 id='save-milestones'>Save milestones</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">AddMilestone</span><span class="p">(</span><span class="nv">$objects</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">user_milestone_insert_input</span><span class="p">!]!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">insert_user_milestone</span><span class="p">(</span><span class="w">
    </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="nv">$objects</span><span class="p">,</span><span class="w">
    </span><span class="n">on_conflict</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">constraint</span><span class="p">:</span><span class="w"> </span><span class="n">user_milestone_pkey</span><span class="p">,</span><span class="w">    
      </span><span class="n">update_columns</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"> 
    </span><span class="p">}</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example input parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="p">{</span><span class="w">
  </span><span class="err">"</span><span class="n">objects</span><span class="err">":</span><span class="w"> </span><span class="err">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="err">"</span><span class="n">user_account_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">a1c5a247</span><span class="err">-</span><span class="n">b70d</span><span class="err">-4</span><span class="n">c0c</span><span class="err">-9</span><span class="n">f84</span><span class="err">-9</span><span class="n">f6bd5243391</span><span class="err">"</span><span class="p">,</span><span class="w">
        </span><span class="err">"</span><span class="n">milestone_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">ALLERGEN_SHELLFISH</span><span class="err">"</span><span class="w"> 
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="err">"</span><span class="n">user_account_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">a1c5a247</span><span class="err">-</span><span class="n">b70d</span><span class="err">-4</span><span class="n">c0c</span><span class="err">-9</span><span class="n">f84</span><span class="err">-9</span><span class="n">f6bd5243391</span><span class="err">"</span><span class="p">,</span><span class="w">
        </span><span class="err">"</span><span class="n">milestone_id</span><span class="err">":</span><span class="w"> </span><span class="err">"</span><span class="n">ALLERGEN_EGG</span><span class="err">"</span><span class="w"> 
    </span><span class="p">}</span><span class="w">
  </span><span class="err">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='parameters-17'>Parameters:</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>objects</td>
<td>list</td>
<td>list of {user_account_id, milestone_id}</td>
</tr>
</tbody></table>
<h3 id='example-input-parameter-4'>Example input parameter</h3>
<p><code>
{
  &quot;objects&quot;: [
    {
      &quot;user_account_id&quot;: &quot;a1c5a247-b70d-4c0c-9f84-9f6bd5243391&quot;,
        &quot;milestone_id&quot;: &quot;ALLERGEN_SHELLFISH&quot; 
    },
    {
      &quot;user_account_id&quot;: &quot;a1c5a247-b70d-4c0c-9f84-9f6bd5243391&quot;,
        &quot;milestone_id&quot;: &quot;ALLERGEN_EGG&quot; 
    }
  ]
}
</code></p>
<h1 id='wip-below'>----------- WIP below</h1>
<p>The below is WIP.</p>
<h1 id='social'>Social</h1>
<p>import { gql } from &quot;@apollo/client&quot;;</p>

<p>{
  &quot;commenter_uid&quot;: &quot;CqznSvrThLfZjrDqlDQrFVhDwpI2&quot;,
  &quot;post_id&quot;: &quot;7177a1bb-875f-4836-939a-7600e7c134cd&quot;,
  &quot;comment&quot;:&quot;hi&quot;
}</p>

<p>export const GQL_COMMENT_RECIPE = gql<code>
mutation InsertComment($commenter_id: uuid!, $recipe_id: uuid!, $comment: String!) {
  insert_comments_one(object: {commenter_id: $commenter_id, recipe_id: $recipe_id, comment: $comment}) {
    id
  }
}
</code></p>

<p>{
  &quot;post_id&quot;: &quot;7177a1bb-875f-4836-939a-7600e7c134cd&quot;,
  &quot;liker_uid&quot;:&quot;CqznSvrThLfZjrDqlDQrFVhDwpI2&quot;
}</p>

<p>export const GQL_LIKE_RECIPE = gql<code>
mutation InsertLike($liker_id: uuid!, $recipe_id: uuid!) {
  insert_likes_one(object: {liker_id: $liker_id, recipe_id: $recipe_id}){
    id
  }
}
</code></p>

<p>export const GQL_UNLIKE_RECIPE = gql<code>
mutation RemoveLike ($liker_id: uuid!, $recipe_id:uuid!){
  update_likes(where: {liker_id: {_eq: $liker_id}, recipe_id: {_eq: $recipe_id}}, 
    _set: {removed_at: now}){
    returning {
      id
    }
  }
}
</code></p>

<p>{
    &quot;recipe_offset&quot;: 0,
    &quot;recipe_limit&quot;: 10,
    &quot;uid&quot;: &quot;test&quot;
  }
export const GQL_GET_FEED_FOLLOWING = gql<code>
query GetFeed(
  $recipe_offset: Int!, 
  $recipe_limit: Int!, 
  $user_account_id: uuid!) @cached {
  recipe(
    offset: $recipe_offset, 
    limit: $recipe_limit, 
    order_by: {created_at: desc},
    where: {
      recipe_status_id: {_eq: COMPLETE}, 
      user_account: {_or: [
        {uid: {_ilike: &quot;%admin%&quot;}},
        {id: {_eq: $user_account_id}},
        {user_follows: {follower_id: {_eq: $user_account_id}}}]}}) {
    id
    user_account {
      uid
      nickname
      thumbnail_link
    }
    link_pic
    title
    description
    created_at
    updated_at
    comments(where: {removed_at: {_is_null: true}}) {
      user_account {
        id
        nickname
        thumbnail_link
      }
      comment
    }
    likes_aggregate {
      aggregate {
        count(distinct: true, columns: liker_id)
      }
    }
    likes(where: {removed_at: {_is_null: true}, user_account: {id: {_eq: $user_account_id}}}) {
      user_account {
        uid
      }
    }
  }
  user_account(
    where: {
      _and: [
        { id: { _neq: $user_account_id } },              
        {_not: {user_follows: { follower_id: { _eq: $user_account_id }}}}
      ]
    },
    order_by: { recipes_aggregate: { count: desc } }
    limit: 5
  ) {
    id
    nickname
    thumbnail_link
  }
}
</code>
   {user_follows: {follower_id: {_neq: $user_account_id}}} TODO put this back to filter out the accounts that user is already following</p>

<p>export const GQL_UNFOLLOW = gql<code>
mutation UpdateUnfollow($follower_id: uuid!, $followee_id: uuid!) {
  update_user_follow(where: {followee_id: {_eq: $followee_id}, follower_id: {_eq: $follower_id}}, _set: {removed_at: now}){
    returning {
      id
    }
  }
}
</code></p>

<p>{
  &quot;follower_uid&quot;: &quot;CqznSvrThLfZjrDqlDQrFVhDwpI2&quot;,
  &quot;followee_uid&quot;: &quot;C83AqbDPRzdhPghTdIGRt6tl2Do2&quot;
}</p>

<p>export const GQL_FOLLOW = gql<code>
mutation InsertFollow ($follower_id: uuid!, $followee_id: uuid!) {
  insert_user_follow_one(object: {follower_id: $follower_id, followee_id: $followee_id}) {
    id
  }
}
</code></p>

<p>{
  &quot;uid&quot;: &quot;test&quot;,
  &quot;recipe_offset&quot;: 0,
  &quot;recipe_limit&quot;: 10,
}</p>

<p>export const GQL_GET_USER = gql`
query fetchUserData($nickname: String!) {
  user_account(where: {nickname: {_eq: $nickname}}) {
    id
    nickname
    bio
    link
    user_type
    thumbnail_link
    user_follows(where: {removed_at: {_is_null: true}}, distinct_on: follower_id) {
      follower_id
    }
    userFollowsByFollowerId(where: {removed_at: {_is_null: true}}, distinct_on: followee_id) {
      followee_id
    }
    recipes{
      id
      title
      link_pic
    }
    user_saved_recipes{
      recipe{
        id
        title
        link_pic
      }
    }
  }
}</p>

<p>`</p>

<p>{
  &quot;tag_filter&quot;: [&quot;ALLERGEN_FREE_EGG&quot;, &quot;STAGE_ONE&quot;]
}
export const GQL_GET_FEED_FOR_YOU = gql<code>
query MyQuery($tag_filter:[tag_enum!]) {
  recipe(where: {recipe_tags: {tag_id: {_in: $tag_filter,}}}) {
    id
    link_pic
  }
}
</code></p>

<p>export const GQL_INSERT_RECIPE_FLAG = gql`
mutation ReportRecipe($reporter_id: uuid = &quot;&quot;, $recipe_id: uuid = &quot;&quot;) {
  insert_flag(objects: {reporter_id: $reporter_id, recipe_id: $recipe_id}) {
    returning{
    reporter_id<br>
    }
  }
}</p>

<p>`</p>

<p>export const GQL_INSERT_USER_FLAG = gql`
mutation ReportUser($reporter_id: uuid = &quot;&quot;, $user_id: uuid = &quot;&quot;) {
  insert_flag(objects: {reporter_id: $reporter_id, user_id: $user_id}) {
    returning{
    reporter_id<br>
    }
  }
}</p>

<p>`</p>
<h1 id='health-records'>Health Records</h1>
<p>Health records include growth data, and food reaction.</p>
<h2 id='growth-records'>Growth Records</h2><h3 id='create'>Create</h3><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">EnterGrowthData</span><span class="p">(</span><span class="nv">$growth</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">baby_growth_hist_insert_input</span><span class="p">!]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">insert_baby_growth_hist</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="nv">$growth</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">baby_id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example input parameters:</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="err">const</span><span class="w"> </span><span class="err">growthFormatted</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="n">baby_id</span><span class="p">:</span><span class="w"> </span><span class="err">'</span><span class="n">cd1783ea</span><span class="err">-7</span><span class="n">f56</span><span class="err">-4</span><span class="n">f42</span><span class="err">-8931-00638</span><span class="n">f801113</span><span class="err">'</span><span class="p">,</span><span class="w">
    </span><span class="n">days</span><span class="p">:</span><span class="w"> </span><span class="err">247</span><span class="p">,</span><span class="w">
    </span><span class="n">growth_type_id</span><span class="p">:</span><span class="w"> </span><span class="err">'</span><span class="n">WEIGHT</span><span class="err">'</span><span class="p">,</span><span class="w">
    </span><span class="n">percentile</span><span class="p">:</span><span class="w"> </span><span class="err">87</span><span class="p">,</span><span class="w">
    </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="err">6.5</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="n">baby_id</span><span class="p">:</span><span class="w"> </span><span class="err">'</span><span class="n">cd1783ea</span><span class="err">-7</span><span class="n">f56</span><span class="err">-4</span><span class="n">f42</span><span class="err">-8931-00638</span><span class="n">f801113</span><span class="err">'</span><span class="p">,</span><span class="w">
    </span><span class="n">days</span><span class="p">:</span><span class="w"> </span><span class="err">247</span><span class="p">,</span><span class="w">
    </span><span class="n">growth_type_id</span><span class="p">:</span><span class="w"> </span><span class="err">'</span><span class="n">HEIGHT</span><span class="err">'</span><span class="p">,</span><span class="w">
    </span><span class="n">percentile</span><span class="p">:</span><span class="w"> </span><span class="err">87</span><span class="p">,</span><span class="w">
    </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="err">6.5</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="n">baby_id</span><span class="p">:</span><span class="w"> </span><span class="err">'</span><span class="n">cd1783ea</span><span class="err">-7</span><span class="n">f56</span><span class="err">-4</span><span class="n">f42</span><span class="err">-8931-00638</span><span class="n">f801113</span><span class="err">'</span><span class="p">,</span><span class="w">
    </span><span class="n">days</span><span class="p">:</span><span class="w"> </span><span class="err">247</span><span class="p">,</span><span class="w">
    </span><span class="n">growth_type_id</span><span class="p">:</span><span class="w"> </span><span class="err">'</span><span class="n">BMI</span><span class="err">'</span><span class="p">,</span><span class="w">
    </span><span class="n">percentile</span><span class="p">:</span><span class="w"> </span><span class="err">87</span><span class="p">,</span><span class="w">
    </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="err">6.5</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="err">]</span><span class="w">

</span></code></pre></div>
<blockquote>
<p>Example call in Apollo</p>
</blockquote>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="err">const</span><span class="w"> </span><span class="err">[insertGrowth]</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">useMutation(GQL_ENTER_GROWTH);</span><span class="w">

</span><span class="err">insertGrowth(</span><span class="p">{</span><span class="w">
  </span><span class="n">variables</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">growth</span><span class="p">:</span><span class="w"> </span><span class="n">growthFormatted</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="err">)</span><span class="w">
</span></code></pre></div>
<p>Input data should be a list of objects with the following fields:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>baby_id</td>
<td>uuid</td>
<td>ID from baby_profile table</td>
</tr>
<tr>
<td>days</td>
<td>number</td>
<td>the baby&#39;s age in days</td>
</tr>
<tr>
<td>growth_type_id</td>
<td>enum</td>
<td>&#39;WEIGHT&#39;, &#39;HEIGHT&#39;, or &#39;BMI&#39;</td>
</tr>
<tr>
<td>percentile</td>
<td>integer</td>
<td>the growth percentile that the app has calculated</td>
</tr>
<tr>
<td>value</td>
<td>float</td>
<td>the growth measure for weight, height, or bmi</td>
</tr>
</tbody></table>
<h3 id='read'>Read</h3>
<p>This part is automatically pulled in when app is loaded with proper account information</p>
<h3 id='update'>Update</h3><h3 id='delete'>Delete</h3>
<p>Currently this functionality deletes ALL growth data in the given ageDays for the baby.</p>
<div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">DeleteGrowthData</span><span class="p">(</span><span class="nv">$baby_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> </span><span class="nv">$ageDays</span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">delete_baby_growth_hist</span><span class="p">(</span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_and</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">baby_id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$baby_id</span><span class="p">},</span><span class="w"> </span><span class="n">days</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$ageDays</span><span class="p">}}}){</span><span class="w">
    </span><span class="n">returning</span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>baby_id</td>
<td>uuid</td>
<td>ID from baby_profile table</td>
</tr>
<tr>
<td>daysDays</td>
<td>number</td>
<td>the baby&#39;s age in days</td>
</tr>
</tbody></table>
<h2 id='food-reactions'>Food Reactions</h2><h3 id='create-2'>Create</h3><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">EnterReactionData</span><span class="p">(</span><span class="w">
  </span><span class="nv">$user_account_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> 
  </span><span class="nv">$entered_at</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!,</span><span class="w"> 
  </span><span class="nv">$baby_profile_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> 
  </span><span class="nv">$reaction</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="nb">String</span><span class="p">!]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> 
  </span><span class="nv">$note</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">insert_baby_reaction_hist</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">user_account_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$user_account_id</span><span class="p">,</span><span class="w"> 
    </span><span class="n">baby_profile_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$baby_profile_id</span><span class="p">,</span><span class="w"> 
    </span><span class="n">entered_at</span><span class="p">:</span><span class="w"> </span><span class="nv">$entered_at</span><span class="p">,</span><span class="w"> 
    </span><span class="n">reaction</span><span class="p">:</span><span class="w"> </span><span class="nv">$reaction</span><span class="p">,</span><span class="w"> 
    </span><span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nv">$note</span><span class="p">}){</span><span class="w">
      </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='read-2'>Read</h3><h3 id='update-2'>Update</h3><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">UpdateReaction</span><span class="p">(</span><span class="w">
  </span><span class="nv">$id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> 
  </span><span class="nv">$entered_at</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
  </span><span class="nv">$note</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> 
  </span><span class="nv">$reaction</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="nb">String</span><span class="p">!]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> 
</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">update_baby_reaction_hist</span><span class="p">(</span><span class="w">
    </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$id</span><span class="p">}},</span><span class="w"> 
    </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nv">$note</span><span class="p">,</span><span class="w"> </span><span class="n">reaction</span><span class="p">:</span><span class="w"> </span><span class="nv">$reaction</span><span class="p">,</span><span class="w"> </span><span class="n">entered_at</span><span class="p">:</span><span class="w"> </span><span class="nv">$entered_at</span><span class="p">}</span><span class="w">
    </span><span class="p">){</span><span class="w">
      </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">id</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='delete-2'>Delete</h3><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">DeleteReaction</span><span class="p">(</span><span class="w">
  </span><span class="nv">$id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> 
</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">update_baby_reaction_hist</span><span class="p">(</span><span class="w">
    </span><span class="n">where</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">_eq</span><span class="p">:</span><span class="w"> </span><span class="nv">$id</span><span class="p">}},</span><span class="w"> 
    </span><span class="n">_set</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">removed_at</span><span class="p">:</span><span class="w"> </span><span class="n">now</span><span class="p">}</span><span class="w">
  </span><span class="p">){</span><span class="w">
    </span><span class="n">returning</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">id</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='food-tracking'>Food Tracking</h1>
<p>Babies are supposed to get introduced to one new food at a time. Food tracking is to track which foods got introduced.</p>
<h2 id='update-food-intro-status'>Update food intro status</h2><div class="highlight"><pre class="highlight graphql tab-graphql"><code><span class="k">mutation</span><span class="w"> </span><span class="n">UpdateIngIntroStatus</span><span class="p">(</span><span class="w">
  </span><span class="nv">$baby_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w"> 
  </span><span class="nv">$ing_intro_id</span><span class="p">:</span><span class="w"> </span><span class="n">uuid</span><span class="p">!,</span><span class="w">
  </span><span class="nv">$attempted_at</span><span class="p">:</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nv">$mastered_at</span><span class="p">:</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">insert_baby_ing_intro_one</span><span class="p">(</span><span class="n">object</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">baby_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$baby_id</span><span class="p">,</span><span class="w"> 
    </span><span class="n">ing_intro_id</span><span class="p">:</span><span class="w"> </span><span class="nv">$ing_intro_id</span><span class="p">,</span><span class="w"> 
    </span><span class="n">attempted_at</span><span class="p">:</span><span class="w"> </span><span class="nv">$attempted_at</span><span class="p">,</span><span class="w"> 
    </span><span class="n">mastered_at</span><span class="p">:</span><span class="w"> </span><span class="nv">$mastered_at</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="n">on_conflict</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">constraint</span><span class="p">:</span><span class="w"> </span><span class="n">baby_ing_intro_baby_id_ing_intro_id_key</span><span class="p">,</span><span class="w">
    </span><span class="n">update_columns</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">attempted_at</span><span class="p">,</span><span class="w"> </span><span class="n">mastered_at</span><span class="p">]</span><span class="w">
  </span><span class="p">}){</span><span class="w">
    </span><span class="n">id</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='codes'>Codes</h1><h2 id='recipe-tag'>Recipe Tag</h2><h2 id='diet-restriction'>Diet Restriction</h2><h2 id='food-allerty'>Food Allerty</h2><h1 id='b2b'>----- B2B</h1>
<p><code>GET http://example.com/api/kittens</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>include_cats</td>
<td>false</td>
<td>If set to true, the result will also include cats.</td>
</tr>
<tr>
<td>available</td>
<td>true</td>
<td>If set to false, the result will include kittens that have already been adopted.</td>
</tr>
</tbody></table>

<aside class="success">
Remember  a happy kitten is an authenticated kitten!
</aside>
<h2 id='get-a-specific-kitten'>Get a Specific Kitten</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'kittn'</span>

<span class="n">api</span> <span class="o">=</span> <span class="no">Kittn</span><span class="o">::</span><span class="no">APIClient</span><span class="p">.</span><span class="nf">authorize!</span><span class="p">(</span><span class="s1">'meowmeowmeow'</span><span class="p">)</span>
<span class="n">api</span><span class="p">.</span><span class="nf">kittens</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Max"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"breed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unknown"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fluffiness"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cuteness"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint retrieves a specific kitten.</p>

<aside class="warning">Inside HTML code blocks like this one, you can't use Markdown, so use <code>&lt;code&gt;</code> blocks to denote code.</aside>
<h1 id='errors'>Errors</h1>
<aside class="notice">
This error section is stored in a separate file in <code>includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files...just save them to the <code>includes</code> folder and add them to the top of your <code>index.md</code>'s frontmatter. Files are included in the order listed.
</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The kitten requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a kitten with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The kitten requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="graphql">graphql</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="jsx">jsx</a>
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
  </body>
</html>
